{"ast":null,"code":"// app.js - SPA Router cho Ecommerce Project\n\nconst view = document.getElementById('view');\nconst nav = document.getElementById('nav');\n\n// Các route ứng với 8 trang\nconst routes = {\n  '/landing': () => import('./pages/LandingPage.js'),\n  '/catalog': () => import('./pages/CatalogPage.js'),\n  '/product': () => import('./pages/ProductDetail.js'),\n  // #/product/:id\n  '/cart': () => import('./pages/CartPage.js'),\n  '/checkout': () => import('./pages/CheckoutPage.js'),\n  '/profile': () => import('./pages/ProfilePage.js'),\n  '/login': () => import('./pages/LoginPage.js'),\n  '/register': () => import('./pages/RegisterPage.js'),\n  '/admin': () => import('./pages/AdminDashboard.js')\n};\n\n// Xây menu navbar\nfunction buildNav() {\n  nav.innerHTML = [['Trang chủ', '#/landing'], ['Danh mục', '#/catalog'], ['Giỏ hàng', '#/cart'], ['Thanh toán', '#/checkout'], ['Hồ sơ', '#/profile'], ['Đăng nhập', '#/login'], ['Đăng ký', '#/register'], ['Admin', '#/admin']].map(([t, href]) => `<a href=\"${href}\">${t}</a>`).join('');\n}\n\n// Tách hash ra path + params\nfunction parseHash() {\n  const h = location.hash.replace(/^#/, '') || '/landing';\n  const parts = h.split('/').filter(Boolean);\n  const path = '/' + (parts[0] || 'landing');\n  const params = parts.slice(1); // ví dụ #/product/12 => ['12']\n  return {\n    path,\n    params\n  };\n}\n\n// Map tên route sang key trong window.Pages\nconst pageMap = {\n  landing: 'LandingPage',\n  catalog: 'CatalogPage',\n  product: 'ProductDetail',\n  cart: 'CartPage',\n  checkout: 'CheckoutPage',\n  profile: 'ProfilePage',\n  login: 'LoginPage',\n  register: 'RegisterPage',\n  admin: 'AdminDashboard'\n};\n\n// Điều hướng và render trang\nasync function navigate() {\n  const {\n    path,\n    params\n  } = parseHash();\n  const loader = routes[path];\n  if (!loader) {\n    view.innerHTML = `<h2>404</h2><p>Không tìm thấy trang: <code>${path}</code></p>`;\n    return;\n  }\n  try {\n    await loader(); // import module (tự gắn vào window.Pages)\n    view.innerHTML = '';\n    const routeName = path.slice(1); // bỏ dấu '/'\n    const key = pageMap[routeName] || 'LandingPage';\n    const pageObj = (window.Pages || {})[key];\n    if (pageObj && typeof pageObj.mount === 'function') {\n      // với product: #/product/123 => params[0] là id\n      const props = routeName === 'product' ? {\n        id: params[0],\n        params\n      } : {\n        params\n      };\n      await pageObj.mount(view, props);\n    } else {\n      view.innerHTML = `<p>Không tìm thấy hàm mount cho ${key}</p>`;\n    }\n  } catch (err) {\n    console.error(err);\n    view.innerHTML = `<h2>Lỗi</h2><pre>${String(err)}</pre>`;\n  }\n}\n\n// Sự kiện\nwindow.addEventListener('hashchange', navigate);\nwindow.addEventListener('DOMContentLoaded', () => {\n  buildNav();\n  navigate();\n});","map":{"version":3,"names":["view","document","getElementById","nav","routes","/landing","/catalog","/product","/cart","/checkout","/profile","/login","/register","/admin","buildNav","innerHTML","map","t","href","join","parseHash","h","location","hash","replace","parts","split","filter","Boolean","path","params","slice","pageMap","landing","catalog","product","cart","checkout","profile","login","register","admin","navigate","loader","routeName","key","pageObj","window","Pages","mount","props","id","err","console","error","String","addEventListener"],"sources":["D:/52200147/HKVII/NodeJS/CK/ecommerce_project_NodeJS_final/frontend/src/app.js"],"sourcesContent":["// app.js - SPA Router cho Ecommerce Project\r\n\r\nconst view = document.getElementById('view');\r\nconst nav = document.getElementById('nav');\r\n\r\n// Các route ứng với 8 trang\r\nconst routes = {\r\n    '/landing': () =>\r\n        import ('./pages/LandingPage.js'),\r\n    '/catalog': () =>\r\n        import ('./pages/CatalogPage.js'),\r\n    '/product': () =>\r\n        import ('./pages/ProductDetail.js'), // #/product/:id\r\n    '/cart': () =>\r\n        import ('./pages/CartPage.js'),\r\n    '/checkout': () =>\r\n        import ('./pages/CheckoutPage.js'),\r\n    '/profile': () =>\r\n        import ('./pages/ProfilePage.js'),\r\n    '/login': () =>\r\n        import ('./pages/LoginPage.js'),\r\n    '/register': () =>\r\n        import ('./pages/RegisterPage.js'),\r\n    '/admin': () =>\r\n        import ('./pages/AdminDashboard.js'),\r\n};\r\n\r\n// Xây menu navbar\r\nfunction buildNav() {\r\n    nav.innerHTML = [\r\n            ['Trang chủ', '#/landing'],\r\n            ['Danh mục', '#/catalog'],\r\n            ['Giỏ hàng', '#/cart'],\r\n            ['Thanh toán', '#/checkout'],\r\n            ['Hồ sơ', '#/profile'],\r\n            ['Đăng nhập', '#/login'],\r\n            ['Đăng ký', '#/register'],\r\n            ['Admin', '#/admin'],\r\n        ]\r\n        .map(([t, href]) => `<a href=\"${href}\">${t}</a>`)\r\n        .join('');\r\n}\r\n\r\n// Tách hash ra path + params\r\nfunction parseHash() {\r\n    const h = location.hash.replace(/^#/, '') || '/landing';\r\n    const parts = h.split('/').filter(Boolean);\r\n    const path = '/' + (parts[0] || 'landing');\r\n    const params = parts.slice(1); // ví dụ #/product/12 => ['12']\r\n    return { path, params };\r\n}\r\n\r\n// Map tên route sang key trong window.Pages\r\nconst pageMap = {\r\n    landing: 'LandingPage',\r\n    catalog: 'CatalogPage',\r\n    product: 'ProductDetail',\r\n    cart: 'CartPage',\r\n    checkout: 'CheckoutPage',\r\n    profile: 'ProfilePage',\r\n    login: 'LoginPage',\r\n    register: 'RegisterPage',\r\n    admin: 'AdminDashboard',\r\n};\r\n\r\n// Điều hướng và render trang\r\nasync function navigate() {\r\n    const { path, params } = parseHash();\r\n    const loader = routes[path];\r\n\r\n    if (!loader) {\r\n        view.innerHTML = `<h2>404</h2><p>Không tìm thấy trang: <code>${path}</code></p>`;\r\n        return;\r\n    }\r\n\r\n    try {\r\n        await loader(); // import module (tự gắn vào window.Pages)\r\n        view.innerHTML = '';\r\n\r\n        const routeName = path.slice(1); // bỏ dấu '/'\r\n        const key = pageMap[routeName] || 'LandingPage';\r\n        const pageObj = (window.Pages || {})[key];\r\n\r\n        if (pageObj && typeof pageObj.mount === 'function') {\r\n            // với product: #/product/123 => params[0] là id\r\n            const props = routeName === 'product' ? { id: params[0], params } : { params };\r\n            await pageObj.mount(view, props);\r\n        } else {\r\n            view.innerHTML = `<p>Không tìm thấy hàm mount cho ${key}</p>`;\r\n        }\r\n    } catch (err) {\r\n        console.error(err);\r\n        view.innerHTML = `<h2>Lỗi</h2><pre>${String(err)}</pre>`;\r\n    }\r\n}\r\n\r\n// Sự kiện\r\nwindow.addEventListener('hashchange', navigate);\r\nwindow.addEventListener('DOMContentLoaded', () => {\r\n    buildNav();\r\n    navigate();\r\n});"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}