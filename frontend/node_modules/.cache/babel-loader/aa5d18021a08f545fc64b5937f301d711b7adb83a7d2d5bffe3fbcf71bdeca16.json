{"ast":null,"code":"// src/pages/CheckoutPage.js\n(function () {\n  function mount(root) {\n    const items = window.Cart.all();\n    if (!items.length) {\n      root.innerHTML = `<div class=\"p-4\">Giỏ hàng trống. <a href=\"#/catalog\">Quay lại cửa hàng</a></div>`;\n      return;\n    }\n    const total = items.reduce((s, it) => s + (it.price || 0) * (it.qty || 1), 0);\n    root.innerHTML = `\n      <div class=\"checkout\">\n        <h2>Thanh toán</h2>\n        <div class=\"summary\">Tổng thanh toán: <b>${total.toLocaleString()} đ</b></div>\n        <form id=\"frm\">\n          <input name=\"fullname\" placeholder=\"Họ tên\" required />\n          <input name=\"address\" placeholder=\"Địa chỉ\" required />\n          <input name=\"phone\" placeholder=\"SĐT\" required />\n          <button class=\"btn\" type=\"submit\">Đặt hàng</button>\n        </form>\n        <div id=\"msg\"></div>\n      </div>\n    `;\n    const form = root.querySelector('#frm');\n    const msg = root.querySelector('#msg');\n    form.addEventListener('submit', async e => {\n      e.preventDefault();\n      const data = Object.fromEntries(new FormData(form).entries());\n      try {\n        await window.Api.OrderAPI.create({\n          items,\n          shipping: data\n        });\n        window.Cart.clear();\n        msg.innerHTML = `<div class=\"text-green-700\">Đặt hàng thành công!</div>`;\n        setTimeout(() => location.hash = '#/profile', 1200);\n      } catch (err) {\n        msg.innerHTML = `<div class=\"text-red-600\">Lỗi đặt hàng: ${err.message}</div>`;\n      }\n    });\n  }\n  window.Pages = window.Pages || {};\n  window.Pages.CheckoutPage = {\n    mount\n  };\n})();","map":{"version":3,"names":["mount","root","items","window","Cart","all","length","innerHTML","total","reduce","s","it","price","qty","toLocaleString","form","querySelector","msg","addEventListener","e","preventDefault","data","Object","fromEntries","FormData","entries","Api","OrderAPI","create","shipping","clear","setTimeout","location","hash","err","message","Pages","CheckoutPage"],"sources":["D:/52200147/HKVII/NodeJS/CK/ecommerce_project_NodeJS_final/frontend/src/pages/CheckoutPage.js"],"sourcesContent":["// src/pages/CheckoutPage.js\r\n(function() {\r\n    function mount(root) {\r\n        const items = window.Cart.all();\r\n        if (!items.length) {\r\n            root.innerHTML = `<div class=\"p-4\">Giỏ hàng trống. <a href=\"#/catalog\">Quay lại cửa hàng</a></div>`;\r\n            return;\r\n        }\r\n\r\n        const total = items.reduce((s, it) => s + (it.price || 0) * (it.qty || 1), 0);\r\n        root.innerHTML = `\r\n      <div class=\"checkout\">\r\n        <h2>Thanh toán</h2>\r\n        <div class=\"summary\">Tổng thanh toán: <b>${total.toLocaleString()} đ</b></div>\r\n        <form id=\"frm\">\r\n          <input name=\"fullname\" placeholder=\"Họ tên\" required />\r\n          <input name=\"address\" placeholder=\"Địa chỉ\" required />\r\n          <input name=\"phone\" placeholder=\"SĐT\" required />\r\n          <button class=\"btn\" type=\"submit\">Đặt hàng</button>\r\n        </form>\r\n        <div id=\"msg\"></div>\r\n      </div>\r\n    `;\r\n\r\n        const form = root.querySelector('#frm');\r\n        const msg = root.querySelector('#msg');\r\n\r\n        form.addEventListener('submit', async(e) => {\r\n            e.preventDefault();\r\n            const data = Object.fromEntries(new FormData(form).entries());\r\n            try {\r\n                await window.Api.OrderAPI.create({ items, shipping: data });\r\n                window.Cart.clear();\r\n                msg.innerHTML = `<div class=\"text-green-700\">Đặt hàng thành công!</div>`;\r\n                setTimeout(() => location.hash = '#/profile', 1200);\r\n            } catch (err) {\r\n                msg.innerHTML = `<div class=\"text-red-600\">Lỗi đặt hàng: ${err.message}</div>`;\r\n            }\r\n        });\r\n    }\r\n\r\n    window.Pages = window.Pages || {};\r\n    window.Pages.CheckoutPage = { mount };\r\n})();"],"mappings":"AAAA;AACA,CAAC,YAAW;EACR,SAASA,KAAKA,CAACC,IAAI,EAAE;IACjB,MAAMC,KAAK,GAAGC,MAAM,CAACC,IAAI,CAACC,GAAG,CAAC,CAAC;IAC/B,IAAI,CAACH,KAAK,CAACI,MAAM,EAAE;MACfL,IAAI,CAACM,SAAS,GAAG,kFAAkF;MACnG;IACJ;IAEA,MAAMC,KAAK,GAAGN,KAAK,CAACO,MAAM,CAAC,CAACC,CAAC,EAAEC,EAAE,KAAKD,CAAC,GAAG,CAACC,EAAE,CAACC,KAAK,IAAI,CAAC,KAAKD,EAAE,CAACE,GAAG,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC;IAC7EZ,IAAI,CAACM,SAAS,GAAG;AACzB;AACA;AACA,mDAAmDC,KAAK,CAACM,cAAc,CAAC,CAAC;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;IAEG,MAAMC,IAAI,GAAGd,IAAI,CAACe,aAAa,CAAC,MAAM,CAAC;IACvC,MAAMC,GAAG,GAAGhB,IAAI,CAACe,aAAa,CAAC,MAAM,CAAC;IAEtCD,IAAI,CAACG,gBAAgB,CAAC,QAAQ,EAAE,MAAMC,CAAC,IAAK;MACxCA,CAAC,CAACC,cAAc,CAAC,CAAC;MAClB,MAAMC,IAAI,GAAGC,MAAM,CAACC,WAAW,CAAC,IAAIC,QAAQ,CAACT,IAAI,CAAC,CAACU,OAAO,CAAC,CAAC,CAAC;MAC7D,IAAI;QACA,MAAMtB,MAAM,CAACuB,GAAG,CAACC,QAAQ,CAACC,MAAM,CAAC;UAAE1B,KAAK;UAAE2B,QAAQ,EAAER;QAAK,CAAC,CAAC;QAC3DlB,MAAM,CAACC,IAAI,CAAC0B,KAAK,CAAC,CAAC;QACnBb,GAAG,CAACV,SAAS,GAAG,wDAAwD;QACxEwB,UAAU,CAAC,MAAMC,QAAQ,CAACC,IAAI,GAAG,WAAW,EAAE,IAAI,CAAC;MACvD,CAAC,CAAC,OAAOC,GAAG,EAAE;QACVjB,GAAG,CAACV,SAAS,GAAG,2CAA2C2B,GAAG,CAACC,OAAO,QAAQ;MAClF;IACJ,CAAC,CAAC;EACN;EAEAhC,MAAM,CAACiC,KAAK,GAAGjC,MAAM,CAACiC,KAAK,IAAI,CAAC,CAAC;EACjCjC,MAAM,CAACiC,KAAK,CAACC,YAAY,GAAG;IAAErC;EAAM,CAAC;AACzC,CAAC,EAAE,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}