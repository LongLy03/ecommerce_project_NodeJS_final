{"ast":null,"code":"// Trang ch·ªß\n// Landing Page UI (single-file JS)\n// Requirements covered:\n// - Show \"New Arrivals\", \"Best Sellers\", and at least 3 distinct categories (Laptops, Monitors, Storage)\n// - Browsing and purchasing without login; auto-create account on guest checkout (simulated via localStorage)\n// - If logged in, default address pre-fills; user can choose a different shipping address\n// - Only two user roles in system: customer and a single admin (FYI; admin UI not shown here)\n//\n// How to use:\n// 1) Include this file in an HTML page that has an empty <body> OR a <div id=\"app\"></div>\n//    <script type=\"module\" src=\"./landing-page.js\"></script>\n// 2) This script will render the entire landing page UI into #app if present, otherwise into document.body\n// 3) All data is mocked for UI. Replace API hooks in the API section for real backend integration.\n\n(function () {\n  const root = document.getElementById('app') || document.body;\n\n  // ----------------------------- Utilities -----------------------------\n  const $ = (sel, el = document) => el.querySelector(sel);\n  const $$ = (sel, el = document) => Array.from(el.querySelectorAll(sel));\n  const fmt = v => new Intl.NumberFormat('vi-VN', {\n    style: 'currency',\n    currency: 'VND'\n  }).format(v);\n  const uid = () => Math.random().toString(36).slice(2, 10);\n  const storage = {\n    get(key, def = null) {\n      try {\n        const v = localStorage.getItem(key);\n        return v ? JSON.parse(v) : def;\n      } catch {\n        return def;\n      }\n    },\n    set(key, val) {\n      localStorage.setItem(key, JSON.stringify(val));\n    },\n    del(key) {\n      localStorage.removeItem(key);\n    }\n  };\n\n  // ----------------------------- Mock Data -----------------------------\n  const mockProducts = [\n  // Laptops\n  {\n    id: 'p1',\n    name: 'Laptop ZenPro X14',\n    price: 23990000,\n    img: 'https://picsum.photos/seed/lap1/600/400',\n    category: 'Laptops',\n    isNew: true,\n    isBest: false\n  }, {\n    id: 'p2',\n    name: 'Ultrabook Aero 13',\n    price: 28990000,\n    img: 'https://picsum.photos/seed/lap2/600/400',\n    category: 'Laptops',\n    isNew: true,\n    isBest: true\n  }, {\n    id: 'p3',\n    name: 'Gaming Beast 15',\n    price: 33990000,\n    img: 'https://picsum.photos/seed/lap3/600/400',\n    category: 'Laptops',\n    isNew: false,\n    isBest: true\n  },\n  // Monitors\n  {\n    id: 'p4',\n    name: 'Monitor 27\" 4K IPS',\n    price: 7990000,\n    img: 'https://picsum.photos/seed/mon1/600/400',\n    category: 'Monitors',\n    isNew: true,\n    isBest: false\n  }, {\n    id: 'p5',\n    name: 'Monitor 34\" UltraWide',\n    price: 15990000,\n    img: 'https://picsum.photos/seed/mon2/600/400',\n    category: 'Monitors',\n    isNew: false,\n    isBest: true\n  },\n  // Storage\n  {\n    id: 'p6',\n    name: 'SSD NVMe 1TB Gen4',\n    price: 2590000,\n    img: 'https://picsum.photos/seed/sto1/600/400',\n    category: 'Storage',\n    isNew: true,\n    isBest: true\n  }, {\n    id: 'p7',\n    name: 'HDD 4TB 7200rpm',\n    price: 2490000,\n    img: 'https://picsum.photos/seed/sto2/600/400',\n    category: 'Storage',\n    isNew: false,\n    isBest: false\n  },\n  // Accessories (extra category)\n  {\n    id: 'p8',\n    name: 'Wireless Mouse Pro',\n    price: 690000,\n    img: 'https://picsum.photos/seed/acc1/600/400',\n    category: 'Accessories',\n    isNew: true,\n    isBest: true\n  }, {\n    id: 'p9',\n    name: 'Mechanical Keyboard 87',\n    price: 1590000,\n    img: 'https://picsum.photos/seed/acc2/600/400',\n    category: 'Accessories',\n    isNew: false,\n    isBest: false\n  }];\n  const CATEGORIES = ['Laptops', 'Monitors', 'Storage', 'Accessories'];\n\n  // ----------------------------- State -----------------------------\n  const initialUser = storage.get('ecom_user', null); // { id, email, fullName, addresses: [{label, line1, phone}], defaultAddressIndex }\n  const initialCart = storage.get('ecom_cart', []); // [{ id, qty }]\n  const initialOrders = storage.get('ecom_orders', []);\n  const state = {\n    user: initialUser,\n    // null or user object\n    cart: initialCart,\n    // array of {id, qty}\n    products: mockProducts,\n    orders: initialOrders,\n    ui: {\n      checkoutOpen: false,\n      checkoutStep: 'details'\n    },\n    get cartCount() {\n      return this.cart.reduce((s, i) => s + i.qty, 0);\n    }\n  };\n  function saveState() {\n    storage.set('ecom_cart', state.cart);\n    storage.set('ecom_orders', state.orders);\n    storage.set('ecom_user', state.user);\n  }\n\n  // ----------------------------- API hooks (replace with real fetch) -----------------------------\n  const API = {\n    async createAccountIfNeeded({\n      fullName,\n      email,\n      phone,\n      addressLine\n    }) {\n      // Simulate auto-account creation if not logged in\n      if (state.user) return state.user;\n      const newUser = {\n        id: 'u_' + uid(),\n        fullName: fullName || 'Guest',\n        email: email || `guest_${uid()}@example.com`,\n        addresses: [{\n          label: 'Default',\n          line1: addressLine || 'N/A',\n          phone: phone || ''\n        }],\n        defaultAddressIndex: 0,\n        role: 'customer'\n      };\n      state.user = newUser;\n      saveState();\n      return newUser;\n    },\n    async placeOrder({\n      items,\n      shippingAddress\n    }) {\n      // Simulate order placement\n      const order = {\n        id: 'ORD-' + Date.now(),\n        userId: state.user ? state.user.id : null,\n        items: items.map(i => ({\n          ...i\n        })),\n        total: items.reduce((s, it) => s + productById(it.id).price * it.qty, 0),\n        shippingAddress,\n        createdAt: new Date().toISOString()\n      };\n      state.orders.unshift(order);\n      state.cart = []; // clear cart after purchase\n      saveState();\n      return order;\n    }\n  };\n\n  // ----------------------------- Selectors & Mutations -----------------------------\n  const productById = id => state.products.find(p => p.id === id);\n  function addToCart(pid, qty = 1) {\n    const found = state.cart.find(i => i.id === pid);\n    if (found) found.qty += qty;else state.cart.push({\n      id: pid,\n      qty\n    });\n    saveState();\n    renderHeader();\n    toast('ƒê√£ th√™m v√†o gi·ªè h√†ng');\n  }\n  function buyNow(pid) {\n    addToCart(pid, 1);\n    openCheckout();\n  }\n  function removeFromCart(pid) {\n    state.cart = state.cart.filter(i => i.id !== pid);\n    saveState();\n    renderCartDropdown();\n    renderHeader();\n  }\n  function updateQty(pid, qty) {\n    const it = state.cart.find(i => i.id === pid);\n    if (!it) return;\n    it.qty = Math.max(1, qty | 0);\n    saveState();\n    renderCartDropdown();\n    renderHeader();\n  }\n\n  // ----------------------------- Styling -----------------------------\n  const styles = `\n    :root { --bg:#0b1020; --card:#121731; --muted:#97a0ba; --fg:#e7eaf6; --acc:#5b8cff; --pill:#1c2346; }\n    *{box-sizing:border-box} html,body{margin:0;padding:0;font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif;background:var(--bg);color:var(--fg)}\n    a{color:inherit;text-decoration:none}\n    .container{max-width:1200px;margin:0 auto;padding:24px}\n    .nav{display:flex;align-items:center;gap:16px;justify-content:space-between;padding:16px 24px;position:sticky;top:0;backdrop-filter:saturate(140%) blur(8px);background:rgba(11,16,32,.7);z-index:50;border-bottom:1px solid #1b2344}\n    .brand{display:flex;align-items:center;gap:10px;font-weight:800}\n    .brand .logo{width:36px;height:36px;border-radius:10px;background:linear-gradient(135deg,#5b8cff,#8a5bff);display:grid;place-items:center}\n    .brand span{letter-spacing:.4px}\n    .search{flex:1;display:flex;align-items:center;gap:10px;max-width:520px;margin:0 24px}\n    .search input{flex:1;padding:12px 14px;border-radius:14px;border:1px solid #1f2a54;background:#0e1430;color:var(--fg)}\n    .actions{display:flex;align-items:center;gap:10px}\n    .icon-btn{position:relative;border:1px solid #1f2a54;background:#0f1633;padding:8px 12px;border-radius:12px;cursor:pointer}\n    .badge{position:absolute;top:-6px;right:-6px;background:#ff5b8c;color:white;border-radius:999px;padding:2px 6px;font-size:11px}\n    .hero{display:grid;grid-template-columns:1.2fr .8fr;gap:20px;align-items:stretch;margin-top:18px}\n    .card{background:var(--card);border:1px solid #1b2344;border-radius:20px;overflow:hidden}\n    .hero-left{position:relative;min-height:280px;background:radial-gradient(1200px 400px at 10% 30%,rgba(91,140,255,.22),transparent),linear-gradient(180deg,rgba(18,23,49,.7),rgba(18,23,49,.9));}\n    .hero-left .content{position:absolute;inset:0;padding:28px;display:flex;flex-direction:column;justify-content:flex-end}\n    .kicker{display:inline-flex;gap:8px;background:var(--pill);border:1px solid #202b58;color:#c9d3fe;border-radius:999px;padding:6px 10px;font-size:12px;margin-bottom:10px}\n    h1{margin:0;font-size:28px;line-height:1.2}\n    .sub{color:var(--muted);margin-top:8px}\n    .cta{margin-top:16px;display:flex;gap:10px}\n    .btn{background:var(--acc);border:none;color:white;padding:12px 16px;border-radius:12px;cursor:pointer;font-weight:600}\n    .btn.outline{background:transparent;border:1px solid #2a3970}\n    .hero-right{display:grid;grid-template-rows:1fr 1fr;gap:20px}\n    .pill-nav{display:flex;gap:8px;flex-wrap:wrap;padding:16px}\n    .pill{background:var(--pill);border:1px solid #202b58;color:#c9d3fe;border-radius:999px;padding:8px 12px;cursor:pointer}\n    .section{margin-top:26px}\n    .section h2{font-size:20px;margin:0 0 12px 0}\n    .grid{display:grid;grid-template-columns:repeat(4,1fr);gap:18px}\n    .product{display:flex;flex-direction:column}\n    .product .img{height:170px;border-radius:16px;overflow:hidden;border:1px solid #202b58;background:#0a0f24}\n    .product .img img{width:100%;height:100%;object-fit:cover;display:block}\n    .product .name{margin:10px 0 4px 0;font-weight:600}\n    .product .price{color:#a8b3d4;font-size:14px}\n    .product .actions{display:flex;gap:8px;margin-top:10px}\n    .btn.sm{padding:8px 10px;border-radius:10px;font-size:13px}\n    .footer{margin:40px 0 20px 0;color:#8f98b9;text-align:center}\n    .muted{color:var(--muted)}\n  \n    /* Cart dropdown */\n    .cart-dd{position:absolute;right:0;top:48px;width:360px;max-height:420px;overflow:auto;background:var(--card);border:1px solid #1b2344;border-radius:16px;display:none}\n    .cart-dd.open{display:block}\n    .cart-item{display:grid;grid-template-columns:64px 1fr auto;gap:10px;padding:10px 12px;border-bottom:1px solid #1b2344}\n    .cart-item img{width:64px;height:64px;border-radius:10px;object-fit:cover}\n    .qty{display:flex;align-items:center;gap:6px}\n    .qty input{width:46px;background:#0e1430;border:1px solid #1f2a54;border-radius:8px;color:var(--fg);padding:6px 8px}\n    .cart-footer{padding:12px;border-top:1px solid #1b2344}\n  \n    /* Modal */\n    .modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.5);z-index:100}\n    .modal.open{display:flex}\n    .modal .panel{width:720px;max-width:92vw;background:var(--card);border:1px solid #1b2344;border-radius:18px;overflow:hidden}\n    .panel header{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;border-bottom:1px solid #1b2344}\n    .panel .content{display:grid;gap:16px;padding:16px}\n    .row{display:grid;grid-template-columns:1fr 1fr;gap:12px}\n    .input{display:flex;flex-direction:column;gap:6px}\n    .input input{padding:10px 12px;border-radius:10px;border:1px solid #1f2a54;background:#0e1430;color:var(--fg)}\n    .address-card{background:#0f1633;border:1px dashed #2a3970;border-radius:12px;padding:10px}\n    .divider{height:1px;background:#1b2344;margin:6px 0}\n    @media (max-width: 960px){\n      .hero{grid-template-columns:1fr}\n      .grid{grid-template-columns:repeat(2,1fr)}\n      .hero-right{grid-template-rows:auto;grid-template-columns:1fr 1fr}\n    }\n    @media (max-width: 560px){ .grid{grid-template-columns:1fr} }\n    `;\n  function injectStyles() {\n    if ($('#landing-styles')) return;\n    const st = document.createElement('style');\n    st.id = 'landing-styles';\n    st.textContent = styles;\n    document.head.appendChild(st);\n  }\n\n  // ----------------------------- UI: Header, Hero, Sections -----------------------------\n  function renderHeader() {\n    const el = $('#nav');\n    const cartCount = state.cartCount;\n    const userName = state.user ? state.user.fullName.split(' ')[0] : 'Kh√°ch';\n    el.innerHTML = `\n        <div class=\"brand\">\n          <div class=\"logo\">üõçÔ∏è</div>\n          <span>Electro<span style=\"color:#8a5bff\">Hub</span></span>\n        </div>\n        <div class=\"search\">\n          <input id=\"searchInput\" placeholder=\"T√¨m ki·∫øm s·∫£n ph·∫©m, danh m·ª•c...\" />\n        </div>\n        <div class=\"actions\">\n          <button id=\"cartBtn\" class=\"icon-btn\">üõí<span class=\"badge\" ${cartCount ? '' : 'style=\"display:none\"'}>${cartCount}</span></button>\n          <div style=\"position:relative\">\n            <div id=\"cartDropdown\" class=\"cart-dd\"></div>\n          </div>\n          <button id=\"profileBtn\" class=\"icon-btn\">${state.user ? 'üë§ ' + userName : '‚Ü™Ô∏è ƒêƒÉng nh·∫≠p'}</button>\n        </div>\n      `;\n    $('#cartBtn').onclick = () => {\n      const dd = $('#cartDropdown');\n      dd.classList.toggle('open');\n      renderCartDropdown();\n    };\n    $('#profileBtn').onclick = () => {\n      if (state.user) {\n        toast('ƒê√£ ƒëƒÉng nh·∫≠p: ' + state.user.email);\n      } else {\n        openCheckout(); // Encourage guest checkout which can auto-create account later\n      }\n    };\n    $('#searchInput').addEventListener('input', e => {\n      const term = e.target.value.toLowerCase();\n      const cards = $$('.product');\n      cards.forEach(card => {\n        const txt = (card.dataset.name + ' ' + card.dataset.category).toLowerCase();\n        card.style.display = txt.includes(term) ? '' : 'none';\n      });\n    });\n  }\n  function renderCartDropdown() {\n    const dd = $('#cartDropdown');\n    if (!dd) return;\n    if (state.cart.length === 0) {\n      dd.innerHTML = `<div style=\"padding:16px\">Gi·ªè h√†ng tr·ªëng</div>`;\n      return;\n    }\n    const rows = state.cart.map(it => {\n      const p = productById(it.id);\n      return `\n          <div class=\"cart-item\">\n            <img src=\"${p.img}\" alt=\"${p.name}\" />\n            <div>\n              <div style=\"font-weight:600\">${p.name}</div>\n              <div class=\"muted\">${fmt(p.price)}</div>\n              <div class=\"qty\" style=\"margin-top:6px\">\n                <span>S·ªë l∆∞·ª£ng:</span>\n                <input type=\"number\" min=\"1\" value=\"${it.qty}\" data-qty=\"${p.id}\" />\n              </div>\n            </div>\n            <button class=\"icon-btn\" data-remove=\"${p.id}\">‚úñÔ∏è</button>\n          </div>\n        `;\n    }).join('');\n    const total = state.cart.reduce((s, i) => s + productById(i.id).price * i.qty, 0);\n    dd.innerHTML = `\n        <div style=\"padding:8px 8px 0 8px; font-weight:700\">Gi·ªè h√†ng</div>\n        ${rows}\n        <div class=\"cart-footer\">\n          <div style=\"display:flex;align-items:center;justify-content:space-between;margin-bottom:10px\"><span>T·∫°m t√≠nh</span><strong>${fmt(total)}</strong></div>\n          <button class=\"btn\" id=\"goCheckout\">Thanh to√°n</button>\n        </div>\n      `;\n    $$('button[data-remove]', dd).forEach(b => b.onclick = () => removeFromCart(b.dataset.remove));\n    $$('input[data-qty]', dd).forEach(inp => inp.onchange = () => updateQty(inp.dataset.qty, Number(inp.value)));\n    $('#goCheckout', dd).onclick = openCheckout;\n  }\n  function renderHero() {\n    return `\n        <section class=\"hero\">\n          <div class=\"card hero-left\">\n            <div class=\"content\">\n              <span class=\"kicker\">Giao h√†ng 2H ‚Ä¢ Tr·∫£ g√≥p 0% ‚Ä¢ B·∫£o h√†nh ch√≠nh h√£ng</span>\n              <h1>Thi·∫øt b·ªã c√¥ng ngh·ªá cho m·ªçi nhu c·∫ßu</h1>\n              <p class=\"sub\">Kh√°m ph√° laptop, m√†n h√¨nh, ·ªï c·ª©ng v√† ph·ª• ki·ªán v·ªõi ∆∞u ƒë√£i h·∫•p d·∫´n h√¥m nay.</p>\n              <div class=\"cta\">\n                <button class=\"btn\" id=\"shopNow\">Mua ngay</button>\n                <button class=\"btn outline\" id=\"viewBest\">B√°n ch·∫°y nh·∫•t</button>\n              </div>\n            </div>\n          </div>\n          <div class=\"hero-right\">\n            <div class=\"card\">\n              <div class=\"pill-nav\">\n                ${CATEGORIES.map(c => `<button class=\"pill\" data-cat=\"${c}\">${c}</button>`).join('')}\n              </div>\n              <div style=\"padding:0 16px 16px 16px\">\n                <div class=\"grid\" id=\"catGrid\"></div>\n              </div>\n            </div>\n            <div class=\"card\" style=\"display:grid;place-items:center;padding:16px\">\n              <div style=\"text-align:center\">\n                <div style=\"font-weight:700;margin-bottom:8px\">∆Øu ƒë√£i th√†nh vi√™n</div>\n                <div class=\"muted\">ƒêƒÉng nh·∫≠p ƒë·ªÉ nh·∫≠n m√£ gi·∫£m ngay 5% cho ƒë∆°n ƒë·∫ßu ti√™n</div>\n                <div style=\"margin-top:12px\"><button class=\"btn outline\" id=\"memberBtn\">T√¨m hi·ªÉu</button></div>\n              </div>\n            </div>\n          </div>\n        </section>\n      `;\n  }\n  function renderProductsGrid(list) {\n    return list.map(p => `\n        <div class=\"product\" data-name=\"${p.name}\" data-category=\"${p.category}\">\n          <div class=\"img\"><img src=\"${p.img}\" alt=\"${p.name}\" /></div>\n          <div class=\"name\">${p.name}</div>\n          <div class=\"price\">${fmt(p.price)}</div>\n          <div class=\"actions\">\n            <button class=\"btn sm\" data-add=\"${p.id}\">Th√™m v√†o gi·ªè</button>\n            <button class=\"btn sm outline\" data-buy=\"${p.id}\">Mua ngay</button>\n          </div>\n        </div>\n      `).join('');\n  }\n  function renderSections() {\n    const newArrivals = state.products.filter(p => p.isNew).slice(0, 8);\n    const bestSellers = state.products.filter(p => p.isBest).slice(0, 8);\n    const sections = `\n        <section class=\"section container\">\n          <h2>‚ú® S·∫£n ph·∫©m m·ªõi</h2>\n          <div class=\"grid\">${renderProductsGrid(newArrivals)}</div>\n        </section>\n        <section class=\"section container\">\n          <h2>üî• B√°n ch·∫°y nh·∫•t</h2>\n          <div class=\"grid\">${renderProductsGrid(bestSellers)}</div>\n        </section>\n        ${CATEGORIES.map(cat => `\n          <section class=\"section container\">\n            <h2>${cat}</h2>\n            <div class=\"grid\">${renderProductsGrid(state.products.filter(p => p.category === cat))}</div>\n          </section>`).join('')}\n      `;\n    return sections;\n  }\n  function renderFooter() {\n    return `<div class=\"footer container\">¬© ${new Date().getFullYear()} ElectroHub ¬∑ <span class=\"muted\">Ch·ªâ l√† mock UI cho trang Landing Page</span></div>`;\n  }\n\n  // ----------------------------- Modal: Checkout (Guest or Logged-in) -----------------------------\n  function openCheckout() {\n    state.ui.checkoutOpen = true;\n    state.ui.checkoutStep = 'details';\n    $('#checkoutModal').classList.add('open');\n    renderCheckout();\n  }\n  function closeCheckout() {\n    state.ui.checkoutOpen = false;\n    $('#checkoutModal').classList.remove('open');\n  }\n  function renderCheckout() {\n    const panel = $('#checkoutPanel');\n    const subtotal = state.cart.reduce((s, i) => s + productById(i.id).price * i.qty, 0);\n\n    // Default address if logged in\n    let defaultAddress = null;\n    if (state.user && Array.isArray(state.user.addresses) && state.user.addresses.length) {\n      defaultAddress = state.user.addresses[state.user.defaultAddressIndex || 0];\n    }\n    panel.innerHTML = `\n        <header>\n          <div style=\"font-weight:700\">Thanh to√°n</div>\n          <button class=\"icon-btn\" id=\"closeCheckout\">‚úñÔ∏è</button>\n        </header>\n        <div class=\"content\">\n          <div class=\"address-card\">\n            ${state.user ? `\n              <div style=\"display:flex;align-items:center;justify-content:space-between;gap:8px\">\n                <div>\n                  <div><strong>${state.user.fullName}</strong> ¬∑ ${state.user.email}</div>\n                  ${defaultAddress ? `<div class=\"muted\">ƒê/c m·∫∑c ƒë·ªãnh: ${defaultAddress.line1} ¬∑ ${defaultAddress.phone || ''}</div>` : '<div class=\"muted\">Ch∆∞a c√≥ ƒë·ªãa ch·ªâ m·∫∑c ƒë·ªãnh</div>'}\n                </div>\n                <button class=\"btn sm outline\" id=\"changeAddress\">Ch·ªçn ƒë·ªãa ch·ªâ kh√°c</button>\n              </div>\n            ` : `\n              <div class=\"muted\">B·∫°n ƒëang thanh to√°n v·ªõi t∆∞ c√°ch <strong>Kh√°ch</strong>. H·ªá th·ªëng s·∫Ω t·ª± t·∫°o t√†i kho·∫£n b·∫±ng email c·ªßa b·∫°n sau khi ƒë·∫∑t h√†ng.</div>\n            `}\n          </div>\n  \n          ${!state.user ? `\n          <div class=\"row\">\n            <div class=\"input\"><label>H·ªç t√™n</label><input id=\"g_fullName\" placeholder=\"Nguy·ªÖn VƒÉn A\" /></div>\n            <div class=\"input\"><label>Email</label><input id=\"g_email\" placeholder=\"email@domain.com\" /></div>\n          </div>\n          <div class=\"row\">\n            <div class=\"input\"><label>S·ªë ƒëi·ªán tho·∫°i</label><input id=\"g_phone\" placeholder=\"09xx xxx xxx\" /></div>\n            <div class=\"input\"><label>ƒê·ªãa ch·ªâ giao h√†ng</label><input id=\"g_address\" placeholder=\"S·ªë nh√†, ƒë∆∞·ªùng, ph∆∞·ªùng/x√£, qu·∫≠n/huy·ªán, t·ªânh/th√†nh\" /></div>\n          </div>\n          ` : `\n          <div class=\"row\">\n            <div class=\"input\"><label>ƒê·ªãa ch·ªâ giao h√†ng</label><input id=\"l_address\" placeholder=\"Nh·∫≠p ƒë·ªãa ch·ªâ kh√°c (t√πy ch·ªçn)\" /></div>\n            <div class=\"input\"><label>Ghi ch√∫</label><input id=\"l_note\" placeholder=\"V√≠ d·ª•: Giao gi·ªù h√†nh ch√≠nh\" /></div>\n          </div>\n          `}\n  \n          <div class=\"divider\"></div>\n          <div style=\"display:flex;align-items:center;justify-content:space-between\">\n            <div class=\"muted\">T·∫°m t√≠nh</div>\n            <div><strong>${fmt(subtotal)}</strong></div>\n          </div>\n          <div style=\"display:flex;align-items:center;justify-content:space-between\">\n            <div class=\"muted\">Ph√≠ v·∫≠n chuy·ªÉn</div>\n            <div>Mi·ªÖn ph√≠</div>\n          </div>\n          <div style=\"display:flex;align-items:center;justify-content:space-between;font-size:18px\">\n            <div>T·ªïng</div>\n            <div><strong>${fmt(subtotal)}</strong></div>\n          </div>\n          <div style=\"display:flex;gap:10px;justify-content:flex-end\">\n            <button class=\"btn outline\" id=\"cancelCheckout\">H·ªßy</button>\n            <button class=\"btn\" id=\"confirmCheckout\">ƒê·∫∑t h√†ng</button>\n          </div>\n        </div>\n      `;\n    $('#closeCheckout').onclick = closeCheckout;\n    $('#cancelCheckout').onclick = closeCheckout;\n    $('#changeAddress') && ($('#changeAddress').onclick = () => {\n      promptChangeAddress();\n    });\n    $('#confirmCheckout').onclick = async () => {\n      if (state.cart.length === 0) {\n        toast('Gi·ªè h√†ng tr·ªëng');\n        return;\n      }\n      let shippingAddress = '';\n      if (!state.user) {\n        const fullName = $('#g_fullName').value.trim();\n        const email = $('#g_email').value.trim();\n        const phone = $('#g_phone').value.trim();\n        const addressLine = $('#g_address').value.trim();\n        if (!fullName || !email || !addressLine) {\n          toast('Vui l√≤ng nh·∫≠p h·ªç t√™n, email v√† ƒë·ªãa ch·ªâ');\n          return;\n        }\n        await API.createAccountIfNeeded({\n          fullName,\n          email,\n          phone,\n          addressLine\n        });\n        shippingAddress = addressLine;\n      } else {\n        const alt = $('#l_address').value.trim();\n        if (alt) {\n          shippingAddress = alt;\n        } else if (defaultAddress) {\n          shippingAddress = defaultAddress.line1;\n        } else {\n          toast('Vui l√≤ng nh·∫≠p ƒë·ªãa ch·ªâ giao h√†ng');\n          return;\n        }\n      }\n      const order = await API.placeOrder({\n        items: state.cart,\n        shippingAddress\n      });\n      closeCheckout();\n      renderHeader();\n      renderCartDropdown();\n      toast('ƒê·∫∑t h√†ng th√†nh c√¥ng! M√£ ƒë∆°n: ' + order.id);\n    };\n  }\n  function promptChangeAddress() {\n    const input = prompt('Nh·∫≠p ƒë·ªãa ch·ªâ giao h√†ng m·ªõi:');\n    if (!input) return;\n    // Save as a temporary address (not default)\n    $('#l_address') && ($('#l_address').value = input);\n  }\n\n  // ----------------------------- Toast -----------------------------\n  function toast(msg) {\n    let t = $('#toast');\n    if (!t) {\n      t = document.createElement('div');\n      t.id = 'toast';\n      t.style.position = 'fixed';\n      t.style.bottom = '20px';\n      t.style.right = '20px';\n      t.style.background = '#141a38';\n      t.style.border = '1px solid #223064';\n      t.style.color = 'white';\n      t.style.padding = '10px 14px';\n      t.style.borderRadius = '10px';\n      t.style.boxShadow = '0 6px 20px rgba(0,0,0,.25)';\n      t.style.zIndex = '200';\n      document.body.appendChild(t);\n    }\n    t.textContent = msg;\n    t.style.opacity = '1';\n    setTimeout(() => {\n      t.style.opacity = '0';\n    }, 1800);\n  }\n\n  // ----------------------------- Main Render -----------------------------\n  function render() {\n    injectStyles();\n    root.innerHTML = `\n        <nav id=\"nav\" class=\"nav\"></nav>\n        <main>\n          <div class=\"container\">${renderHero()}</div>\n          ${renderSections()}\n        </main>\n        <div class=\"modal\" id=\"checkoutModal\"><div class=\"panel\" id=\"checkoutPanel\"></div></div>\n        ${renderFooter()}\n      `;\n    renderHeader();\n\n    // Hook hero buttons & category grid\n    $('#shopNow').onclick = () => {\n      const firstAdd = $('[data-add]');\n      if (firstAdd) {\n        firstAdd.click();\n      }\n      openCheckout();\n    };\n    $('#viewBest').onclick = () => {\n      window.scrollTo({\n        top: $('.section:nth-of-type(2)').offsetTop - 60,\n        behavior: 'smooth'\n      });\n    };\n    $('#memberBtn').onclick = () => toast('ƒêƒÉng nh·∫≠p ƒë·ªÉ nh·∫≠n ∆∞u ƒë√£i th√†nh vi√™n');\n\n    // Category pills\n    $$('.pill').forEach(p => p.onclick = () => {\n      const cat = p.dataset.cat;\n      const grid = $('#catGrid');\n      const list = state.products.filter(x => x.category === cat).slice(0, 4);\n      grid.innerHTML = renderProductsGrid(list);\n      bindProductButtons(grid);\n    });\n    // default category view\n    const grid = $('#catGrid');\n    grid.innerHTML = renderProductsGrid(state.products.filter(p => p.category === CATEGORIES[0]).slice(0, 4));\n    bindProductButtons(grid);\n\n    // product sections buttons\n    $$('.section .grid').forEach(g => bindProductButtons(g));\n\n    // modal close on outside click\n    $('#checkoutModal').addEventListener('click', e => {\n      if (e.target.id === 'checkoutModal') closeCheckout();\n    });\n  }\n  function bindProductButtons(scopeEl) {\n    $$('button[data-add]', scopeEl).forEach(b => b.onclick = () => addToCart(b.dataset.add));\n    $$('button[data-buy]', scopeEl).forEach(b => b.onclick = () => buyNow(b.dataset.buy));\n  }\n\n  // Initial mount\n  render();\n  window.Pages = window.Pages || {};\n  window.Pages.LandingPage = {\n    mount\n  };\n})();","map":{"version":3,"names":["root","document","getElementById","body","$","sel","el","querySelector","$$","Array","from","querySelectorAll","fmt","v","Intl","NumberFormat","style","currency","format","uid","Math","random","toString","slice","storage","get","key","def","localStorage","getItem","JSON","parse","set","val","setItem","stringify","del","removeItem","mockProducts","id","name","price","img","category","isNew","isBest","CATEGORIES","initialUser","initialCart","initialOrders","state","user","cart","products","orders","ui","checkoutOpen","checkoutStep","cartCount","reduce","s","i","qty","saveState","API","createAccountIfNeeded","fullName","email","phone","addressLine","newUser","addresses","label","line1","defaultAddressIndex","role","placeOrder","items","shippingAddress","order","Date","now","userId","map","total","it","productById","createdAt","toISOString","unshift","find","p","addToCart","pid","found","push","renderHeader","toast","buyNow","openCheckout","removeFromCart","filter","renderCartDropdown","updateQty","max","styles","injectStyles","st","createElement","textContent","head","appendChild","userName","split","innerHTML","onclick","dd","classList","toggle","addEventListener","e","term","target","value","toLowerCase","cards","forEach","card","txt","dataset","display","includes","length","rows","join","b","remove","inp","onchange","Number","renderHero","c","renderProductsGrid","list","renderSections","newArrivals","bestSellers","sections","cat","renderFooter","getFullYear","add","renderCheckout","closeCheckout","panel","subtotal","defaultAddress","isArray","promptChangeAddress","trim","alt","input","prompt","msg","t","position","bottom","right","background","border","color","padding","borderRadius","boxShadow","zIndex","opacity","setTimeout","render","firstAdd","click","window","scrollTo","top","offsetTop","behavior","grid","x","bindProductButtons","g","scopeEl","buy","Pages","LandingPage","mount"],"sources":["D:/52200147/HKVII/NodeJS/CK/ecommerce_project_NodeJS_final/frontend/src/pages/LandingPage.js"],"sourcesContent":["// Trang ch·ªß\r\n// Landing Page UI (single-file JS)\r\n// Requirements covered:\r\n// - Show \"New Arrivals\", \"Best Sellers\", and at least 3 distinct categories (Laptops, Monitors, Storage)\r\n// - Browsing and purchasing without login; auto-create account on guest checkout (simulated via localStorage)\r\n// - If logged in, default address pre-fills; user can choose a different shipping address\r\n// - Only two user roles in system: customer and a single admin (FYI; admin UI not shown here)\r\n//\r\n// How to use:\r\n// 1) Include this file in an HTML page that has an empty <body> OR a <div id=\"app\"></div>\r\n//    <script type=\"module\" src=\"./landing-page.js\"></script>\r\n// 2) This script will render the entire landing page UI into #app if present, otherwise into document.body\r\n// 3) All data is mocked for UI. Replace API hooks in the API section for real backend integration.\r\n\r\n(function() {\r\n        const root = document.getElementById('app') || document.body;\r\n\r\n        // ----------------------------- Utilities -----------------------------\r\n        const $ = (sel, el = document) => el.querySelector(sel);\r\n        const $$ = (sel, el = document) => Array.from(el.querySelectorAll(sel));\r\n        const fmt = (v) => new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' }).format(v);\r\n        const uid = () => Math.random().toString(36).slice(2, 10);\r\n\r\n        const storage = {\r\n            get(key, def = null) {\r\n                try { const v = localStorage.getItem(key); return v ? JSON.parse(v) : def; } catch { return def; }\r\n            },\r\n            set(key, val) { localStorage.setItem(key, JSON.stringify(val)); },\r\n            del(key) { localStorage.removeItem(key); }\r\n        };\r\n\r\n        // ----------------------------- Mock Data -----------------------------\r\n        const mockProducts = [\r\n            // Laptops\r\n            { id: 'p1', name: 'Laptop ZenPro X14', price: 23990000, img: 'https://picsum.photos/seed/lap1/600/400', category: 'Laptops', isNew: true, isBest: false },\r\n            { id: 'p2', name: 'Ultrabook Aero 13', price: 28990000, img: 'https://picsum.photos/seed/lap2/600/400', category: 'Laptops', isNew: true, isBest: true },\r\n            { id: 'p3', name: 'Gaming Beast 15', price: 33990000, img: 'https://picsum.photos/seed/lap3/600/400', category: 'Laptops', isNew: false, isBest: true },\r\n\r\n            // Monitors\r\n            { id: 'p4', name: 'Monitor 27\" 4K IPS', price: 7990000, img: 'https://picsum.photos/seed/mon1/600/400', category: 'Monitors', isNew: true, isBest: false },\r\n            { id: 'p5', name: 'Monitor 34\" UltraWide', price: 15990000, img: 'https://picsum.photos/seed/mon2/600/400', category: 'Monitors', isNew: false, isBest: true },\r\n\r\n            // Storage\r\n            { id: 'p6', name: 'SSD NVMe 1TB Gen4', price: 2590000, img: 'https://picsum.photos/seed/sto1/600/400', category: 'Storage', isNew: true, isBest: true },\r\n            { id: 'p7', name: 'HDD 4TB 7200rpm', price: 2490000, img: 'https://picsum.photos/seed/sto2/600/400', category: 'Storage', isNew: false, isBest: false },\r\n\r\n            // Accessories (extra category)\r\n            { id: 'p8', name: 'Wireless Mouse Pro', price: 690000, img: 'https://picsum.photos/seed/acc1/600/400', category: 'Accessories', isNew: true, isBest: true },\r\n            { id: 'p9', name: 'Mechanical Keyboard 87', price: 1590000, img: 'https://picsum.photos/seed/acc2/600/400', category: 'Accessories', isNew: false, isBest: false },\r\n        ];\r\n\r\n        const CATEGORIES = ['Laptops', 'Monitors', 'Storage', 'Accessories'];\r\n\r\n        // ----------------------------- State -----------------------------\r\n        const initialUser = storage.get('ecom_user', null); // { id, email, fullName, addresses: [{label, line1, phone}], defaultAddressIndex }\r\n        const initialCart = storage.get('ecom_cart', []); // [{ id, qty }]\r\n        const initialOrders = storage.get('ecom_orders', []);\r\n\r\n        const state = {\r\n            user: initialUser, // null or user object\r\n            cart: initialCart, // array of {id, qty}\r\n            products: mockProducts,\r\n            orders: initialOrders,\r\n            ui: { checkoutOpen: false, checkoutStep: 'details' },\r\n            get cartCount() { return this.cart.reduce((s, i) => s + i.qty, 0); },\r\n        };\r\n\r\n        function saveState() {\r\n            storage.set('ecom_cart', state.cart);\r\n            storage.set('ecom_orders', state.orders);\r\n            storage.set('ecom_user', state.user);\r\n        }\r\n\r\n        // ----------------------------- API hooks (replace with real fetch) -----------------------------\r\n        const API = {\r\n            async createAccountIfNeeded({ fullName, email, phone, addressLine }) {\r\n                // Simulate auto-account creation if not logged in\r\n                if (state.user) return state.user;\r\n                const newUser = {\r\n                    id: 'u_' + uid(),\r\n                    fullName: fullName || 'Guest',\r\n                    email: email || `guest_${uid()}@example.com`,\r\n                    addresses: [{ label: 'Default', line1: addressLine || 'N/A', phone: phone || '' }],\r\n                    defaultAddressIndex: 0,\r\n                    role: 'customer'\r\n                };\r\n                state.user = newUser;\r\n                saveState();\r\n                return newUser;\r\n            },\r\n            async placeOrder({ items, shippingAddress }) {\r\n                // Simulate order placement\r\n                const order = {\r\n                    id: 'ORD-' + Date.now(),\r\n                    userId: state.user ? state.user.id : null,\r\n                    items: items.map(i => ({...i })),\r\n                    total: items.reduce((s, it) => s + productById(it.id).price * it.qty, 0),\r\n                    shippingAddress,\r\n                    createdAt: new Date().toISOString()\r\n                };\r\n                state.orders.unshift(order);\r\n                state.cart = []; // clear cart after purchase\r\n                saveState();\r\n                return order;\r\n            }\r\n        };\r\n\r\n        // ----------------------------- Selectors & Mutations -----------------------------\r\n        const productById = (id) => state.products.find(p => p.id === id);\r\n\r\n        function addToCart(pid, qty = 1) {\r\n            const found = state.cart.find(i => i.id === pid);\r\n            if (found) found.qty += qty;\r\n            else state.cart.push({ id: pid, qty });\r\n            saveState();\r\n            renderHeader();\r\n            toast('ƒê√£ th√™m v√†o gi·ªè h√†ng');\r\n        }\r\n\r\n        function buyNow(pid) {\r\n            addToCart(pid, 1);\r\n            openCheckout();\r\n        }\r\n\r\n        function removeFromCart(pid) {\r\n            state.cart = state.cart.filter(i => i.id !== pid);\r\n            saveState();\r\n            renderCartDropdown();\r\n            renderHeader();\r\n        }\r\n\r\n        function updateQty(pid, qty) {\r\n            const it = state.cart.find(i => i.id === pid);\r\n            if (!it) return;\r\n            it.qty = Math.max(1, qty | 0);\r\n            saveState();\r\n            renderCartDropdown();\r\n            renderHeader();\r\n        }\r\n\r\n        // ----------------------------- Styling -----------------------------\r\n        const styles = `\r\n    :root { --bg:#0b1020; --card:#121731; --muted:#97a0ba; --fg:#e7eaf6; --acc:#5b8cff; --pill:#1c2346; }\r\n    *{box-sizing:border-box} html,body{margin:0;padding:0;font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif;background:var(--bg);color:var(--fg)}\r\n    a{color:inherit;text-decoration:none}\r\n    .container{max-width:1200px;margin:0 auto;padding:24px}\r\n    .nav{display:flex;align-items:center;gap:16px;justify-content:space-between;padding:16px 24px;position:sticky;top:0;backdrop-filter:saturate(140%) blur(8px);background:rgba(11,16,32,.7);z-index:50;border-bottom:1px solid #1b2344}\r\n    .brand{display:flex;align-items:center;gap:10px;font-weight:800}\r\n    .brand .logo{width:36px;height:36px;border-radius:10px;background:linear-gradient(135deg,#5b8cff,#8a5bff);display:grid;place-items:center}\r\n    .brand span{letter-spacing:.4px}\r\n    .search{flex:1;display:flex;align-items:center;gap:10px;max-width:520px;margin:0 24px}\r\n    .search input{flex:1;padding:12px 14px;border-radius:14px;border:1px solid #1f2a54;background:#0e1430;color:var(--fg)}\r\n    .actions{display:flex;align-items:center;gap:10px}\r\n    .icon-btn{position:relative;border:1px solid #1f2a54;background:#0f1633;padding:8px 12px;border-radius:12px;cursor:pointer}\r\n    .badge{position:absolute;top:-6px;right:-6px;background:#ff5b8c;color:white;border-radius:999px;padding:2px 6px;font-size:11px}\r\n    .hero{display:grid;grid-template-columns:1.2fr .8fr;gap:20px;align-items:stretch;margin-top:18px}\r\n    .card{background:var(--card);border:1px solid #1b2344;border-radius:20px;overflow:hidden}\r\n    .hero-left{position:relative;min-height:280px;background:radial-gradient(1200px 400px at 10% 30%,rgba(91,140,255,.22),transparent),linear-gradient(180deg,rgba(18,23,49,.7),rgba(18,23,49,.9));}\r\n    .hero-left .content{position:absolute;inset:0;padding:28px;display:flex;flex-direction:column;justify-content:flex-end}\r\n    .kicker{display:inline-flex;gap:8px;background:var(--pill);border:1px solid #202b58;color:#c9d3fe;border-radius:999px;padding:6px 10px;font-size:12px;margin-bottom:10px}\r\n    h1{margin:0;font-size:28px;line-height:1.2}\r\n    .sub{color:var(--muted);margin-top:8px}\r\n    .cta{margin-top:16px;display:flex;gap:10px}\r\n    .btn{background:var(--acc);border:none;color:white;padding:12px 16px;border-radius:12px;cursor:pointer;font-weight:600}\r\n    .btn.outline{background:transparent;border:1px solid #2a3970}\r\n    .hero-right{display:grid;grid-template-rows:1fr 1fr;gap:20px}\r\n    .pill-nav{display:flex;gap:8px;flex-wrap:wrap;padding:16px}\r\n    .pill{background:var(--pill);border:1px solid #202b58;color:#c9d3fe;border-radius:999px;padding:8px 12px;cursor:pointer}\r\n    .section{margin-top:26px}\r\n    .section h2{font-size:20px;margin:0 0 12px 0}\r\n    .grid{display:grid;grid-template-columns:repeat(4,1fr);gap:18px}\r\n    .product{display:flex;flex-direction:column}\r\n    .product .img{height:170px;border-radius:16px;overflow:hidden;border:1px solid #202b58;background:#0a0f24}\r\n    .product .img img{width:100%;height:100%;object-fit:cover;display:block}\r\n    .product .name{margin:10px 0 4px 0;font-weight:600}\r\n    .product .price{color:#a8b3d4;font-size:14px}\r\n    .product .actions{display:flex;gap:8px;margin-top:10px}\r\n    .btn.sm{padding:8px 10px;border-radius:10px;font-size:13px}\r\n    .footer{margin:40px 0 20px 0;color:#8f98b9;text-align:center}\r\n    .muted{color:var(--muted)}\r\n  \r\n    /* Cart dropdown */\r\n    .cart-dd{position:absolute;right:0;top:48px;width:360px;max-height:420px;overflow:auto;background:var(--card);border:1px solid #1b2344;border-radius:16px;display:none}\r\n    .cart-dd.open{display:block}\r\n    .cart-item{display:grid;grid-template-columns:64px 1fr auto;gap:10px;padding:10px 12px;border-bottom:1px solid #1b2344}\r\n    .cart-item img{width:64px;height:64px;border-radius:10px;object-fit:cover}\r\n    .qty{display:flex;align-items:center;gap:6px}\r\n    .qty input{width:46px;background:#0e1430;border:1px solid #1f2a54;border-radius:8px;color:var(--fg);padding:6px 8px}\r\n    .cart-footer{padding:12px;border-top:1px solid #1b2344}\r\n  \r\n    /* Modal */\r\n    .modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.5);z-index:100}\r\n    .modal.open{display:flex}\r\n    .modal .panel{width:720px;max-width:92vw;background:var(--card);border:1px solid #1b2344;border-radius:18px;overflow:hidden}\r\n    .panel header{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;border-bottom:1px solid #1b2344}\r\n    .panel .content{display:grid;gap:16px;padding:16px}\r\n    .row{display:grid;grid-template-columns:1fr 1fr;gap:12px}\r\n    .input{display:flex;flex-direction:column;gap:6px}\r\n    .input input{padding:10px 12px;border-radius:10px;border:1px solid #1f2a54;background:#0e1430;color:var(--fg)}\r\n    .address-card{background:#0f1633;border:1px dashed #2a3970;border-radius:12px;padding:10px}\r\n    .divider{height:1px;background:#1b2344;margin:6px 0}\r\n    @media (max-width: 960px){\r\n      .hero{grid-template-columns:1fr}\r\n      .grid{grid-template-columns:repeat(2,1fr)}\r\n      .hero-right{grid-template-rows:auto;grid-template-columns:1fr 1fr}\r\n    }\r\n    @media (max-width: 560px){ .grid{grid-template-columns:1fr} }\r\n    `;\r\n\r\n        function injectStyles() {\r\n            if ($('#landing-styles')) return;\r\n            const st = document.createElement('style');\r\n            st.id = 'landing-styles';\r\n            st.textContent = styles;\r\n            document.head.appendChild(st);\r\n        }\r\n\r\n        // ----------------------------- UI: Header, Hero, Sections -----------------------------\r\n        function renderHeader() {\r\n            const el = $('#nav');\r\n            const cartCount = state.cartCount;\r\n            const userName = state.user ? state.user.fullName.split(' ')[0] : 'Kh√°ch';\r\n\r\n            el.innerHTML = `\r\n        <div class=\"brand\">\r\n          <div class=\"logo\">üõçÔ∏è</div>\r\n          <span>Electro<span style=\"color:#8a5bff\">Hub</span></span>\r\n        </div>\r\n        <div class=\"search\">\r\n          <input id=\"searchInput\" placeholder=\"T√¨m ki·∫øm s·∫£n ph·∫©m, danh m·ª•c...\" />\r\n        </div>\r\n        <div class=\"actions\">\r\n          <button id=\"cartBtn\" class=\"icon-btn\">üõí<span class=\"badge\" ${cartCount? '':'style=\"display:none\"'}>${cartCount}</span></button>\r\n          <div style=\"position:relative\">\r\n            <div id=\"cartDropdown\" class=\"cart-dd\"></div>\r\n          </div>\r\n          <button id=\"profileBtn\" class=\"icon-btn\">${state.user ? 'üë§ '+userName : '‚Ü™Ô∏è ƒêƒÉng nh·∫≠p'}</button>\r\n        </div>\r\n      `;\r\n\r\n            $('#cartBtn').onclick = () => {\r\n                const dd = $('#cartDropdown');\r\n                dd.classList.toggle('open');\r\n                renderCartDropdown();\r\n            };\r\n\r\n            $('#profileBtn').onclick = () => {\r\n                if (state.user) {\r\n                    toast('ƒê√£ ƒëƒÉng nh·∫≠p: ' + state.user.email);\r\n                } else {\r\n                    openCheckout(); // Encourage guest checkout which can auto-create account later\r\n                }\r\n            };\r\n\r\n            $('#searchInput').addEventListener('input', (e) => {\r\n                const term = e.target.value.toLowerCase();\r\n                const cards = $$('.product');\r\n                cards.forEach(card => {\r\n                    const txt = (card.dataset.name + ' ' + card.dataset.category).toLowerCase();\r\n                    card.style.display = txt.includes(term) ? '' : 'none';\r\n                });\r\n            });\r\n        }\r\n\r\n        function renderCartDropdown() {\r\n            const dd = $('#cartDropdown');\r\n            if (!dd) return;\r\n            if (state.cart.length === 0) {\r\n                dd.innerHTML = `<div style=\"padding:16px\">Gi·ªè h√†ng tr·ªëng</div>`;\r\n                return;\r\n            }\r\n            const rows = state.cart.map(it => {\r\n                const p = productById(it.id);\r\n                return `\r\n          <div class=\"cart-item\">\r\n            <img src=\"${p.img}\" alt=\"${p.name}\" />\r\n            <div>\r\n              <div style=\"font-weight:600\">${p.name}</div>\r\n              <div class=\"muted\">${fmt(p.price)}</div>\r\n              <div class=\"qty\" style=\"margin-top:6px\">\r\n                <span>S·ªë l∆∞·ª£ng:</span>\r\n                <input type=\"number\" min=\"1\" value=\"${it.qty}\" data-qty=\"${p.id}\" />\r\n              </div>\r\n            </div>\r\n            <button class=\"icon-btn\" data-remove=\"${p.id}\">‚úñÔ∏è</button>\r\n          </div>\r\n        `;\r\n            }).join('');\r\n\r\n            const total = state.cart.reduce((s, i) => s + productById(i.id).price * i.qty, 0);\r\n\r\n            dd.innerHTML = `\r\n        <div style=\"padding:8px 8px 0 8px; font-weight:700\">Gi·ªè h√†ng</div>\r\n        ${rows}\r\n        <div class=\"cart-footer\">\r\n          <div style=\"display:flex;align-items:center;justify-content:space-between;margin-bottom:10px\"><span>T·∫°m t√≠nh</span><strong>${fmt(total)}</strong></div>\r\n          <button class=\"btn\" id=\"goCheckout\">Thanh to√°n</button>\r\n        </div>\r\n      `;\r\n\r\n            $$('button[data-remove]', dd).forEach(b => b.onclick = () => removeFromCart(b.dataset.remove));\r\n            $$('input[data-qty]', dd).forEach(inp => inp.onchange = () => updateQty(inp.dataset.qty, Number(inp.value)));\r\n            $('#goCheckout', dd).onclick = openCheckout;\r\n        }\r\n\r\n        function renderHero() {\r\n            return `\r\n        <section class=\"hero\">\r\n          <div class=\"card hero-left\">\r\n            <div class=\"content\">\r\n              <span class=\"kicker\">Giao h√†ng 2H ‚Ä¢ Tr·∫£ g√≥p 0% ‚Ä¢ B·∫£o h√†nh ch√≠nh h√£ng</span>\r\n              <h1>Thi·∫øt b·ªã c√¥ng ngh·ªá cho m·ªçi nhu c·∫ßu</h1>\r\n              <p class=\"sub\">Kh√°m ph√° laptop, m√†n h√¨nh, ·ªï c·ª©ng v√† ph·ª• ki·ªán v·ªõi ∆∞u ƒë√£i h·∫•p d·∫´n h√¥m nay.</p>\r\n              <div class=\"cta\">\r\n                <button class=\"btn\" id=\"shopNow\">Mua ngay</button>\r\n                <button class=\"btn outline\" id=\"viewBest\">B√°n ch·∫°y nh·∫•t</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"hero-right\">\r\n            <div class=\"card\">\r\n              <div class=\"pill-nav\">\r\n                ${CATEGORIES.map(c => `<button class=\"pill\" data-cat=\"${c}\">${c}</button>`).join('')}\r\n              </div>\r\n              <div style=\"padding:0 16px 16px 16px\">\r\n                <div class=\"grid\" id=\"catGrid\"></div>\r\n              </div>\r\n            </div>\r\n            <div class=\"card\" style=\"display:grid;place-items:center;padding:16px\">\r\n              <div style=\"text-align:center\">\r\n                <div style=\"font-weight:700;margin-bottom:8px\">∆Øu ƒë√£i th√†nh vi√™n</div>\r\n                <div class=\"muted\">ƒêƒÉng nh·∫≠p ƒë·ªÉ nh·∫≠n m√£ gi·∫£m ngay 5% cho ƒë∆°n ƒë·∫ßu ti√™n</div>\r\n                <div style=\"margin-top:12px\"><button class=\"btn outline\" id=\"memberBtn\">T√¨m hi·ªÉu</button></div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </section>\r\n      `;\r\n    }\r\n  \r\n    function renderProductsGrid(list) {\r\n      return list.map(p => `\r\n        <div class=\"product\" data-name=\"${p.name}\" data-category=\"${p.category}\">\r\n          <div class=\"img\"><img src=\"${p.img}\" alt=\"${p.name}\" /></div>\r\n          <div class=\"name\">${p.name}</div>\r\n          <div class=\"price\">${fmt(p.price)}</div>\r\n          <div class=\"actions\">\r\n            <button class=\"btn sm\" data-add=\"${p.id}\">Th√™m v√†o gi·ªè</button>\r\n            <button class=\"btn sm outline\" data-buy=\"${p.id}\">Mua ngay</button>\r\n          </div>\r\n        </div>\r\n      `).join('');\r\n    }\r\n  \r\n    function renderSections() {\r\n      const newArrivals = state.products.filter(p => p.isNew).slice(0, 8);\r\n      const bestSellers = state.products.filter(p => p.isBest).slice(0, 8);\r\n  \r\n      const sections = `\r\n        <section class=\"section container\">\r\n          <h2>‚ú® S·∫£n ph·∫©m m·ªõi</h2>\r\n          <div class=\"grid\">${renderProductsGrid(newArrivals)}</div>\r\n        </section>\r\n        <section class=\"section container\">\r\n          <h2>üî• B√°n ch·∫°y nh·∫•t</h2>\r\n          <div class=\"grid\">${renderProductsGrid(bestSellers)}</div>\r\n        </section>\r\n        ${CATEGORIES.map(cat => `\r\n          <section class=\"section container\">\r\n            <h2>${cat}</h2>\r\n            <div class=\"grid\">${renderProductsGrid(state.products.filter(p => p.category === cat))}</div>\r\n          </section>`).join('')}\r\n      `;\r\n      return sections;\r\n    }\r\n  \r\n    function renderFooter() {\r\n      return `<div class=\"footer container\">¬© ${new Date().getFullYear()} ElectroHub ¬∑ <span class=\"muted\">Ch·ªâ l√† mock UI cho trang Landing Page</span></div>`;\r\n    }\r\n  \r\n    // ----------------------------- Modal: Checkout (Guest or Logged-in) -----------------------------\r\n    function openCheckout() {\r\n      state.ui.checkoutOpen = true; state.ui.checkoutStep = 'details';\r\n      $('#checkoutModal').classList.add('open');\r\n      renderCheckout();\r\n    }\r\n    function closeCheckout() {\r\n      state.ui.checkoutOpen = false; $('#checkoutModal').classList.remove('open');\r\n    }\r\n  \r\n    function renderCheckout() {\r\n      const panel = $('#checkoutPanel');\r\n      const subtotal = state.cart.reduce((s, i) => s + productById(i.id).price * i.qty, 0);\r\n  \r\n      // Default address if logged in\r\n      let defaultAddress = null;\r\n      if (state.user && Array.isArray(state.user.addresses) && state.user.addresses.length) {\r\n        defaultAddress = state.user.addresses[state.user.defaultAddressIndex || 0];\r\n      }\r\n  \r\n      panel.innerHTML = `\r\n        <header>\r\n          <div style=\"font-weight:700\">Thanh to√°n</div>\r\n          <button class=\"icon-btn\" id=\"closeCheckout\">‚úñÔ∏è</button>\r\n        </header>\r\n        <div class=\"content\">\r\n          <div class=\"address-card\">\r\n            ${state.user ? `\r\n              <div style=\"display:flex;align-items:center;justify-content:space-between;gap:8px\">\r\n                <div>\r\n                  <div><strong>${state.user.fullName}</strong> ¬∑ ${state.user.email}</div>\r\n                  ${defaultAddress ? `<div class=\"muted\">ƒê/c m·∫∑c ƒë·ªãnh: ${defaultAddress.line1} ¬∑ ${defaultAddress.phone || ''}</div>` : '<div class=\"muted\">Ch∆∞a c√≥ ƒë·ªãa ch·ªâ m·∫∑c ƒë·ªãnh</div>'}\r\n                </div>\r\n                <button class=\"btn sm outline\" id=\"changeAddress\">Ch·ªçn ƒë·ªãa ch·ªâ kh√°c</button>\r\n              </div>\r\n            ` : `\r\n              <div class=\"muted\">B·∫°n ƒëang thanh to√°n v·ªõi t∆∞ c√°ch <strong>Kh√°ch</strong>. H·ªá th·ªëng s·∫Ω t·ª± t·∫°o t√†i kho·∫£n b·∫±ng email c·ªßa b·∫°n sau khi ƒë·∫∑t h√†ng.</div>\r\n            `}\r\n          </div>\r\n  \r\n          ${!state.user ? `\r\n          <div class=\"row\">\r\n            <div class=\"input\"><label>H·ªç t√™n</label><input id=\"g_fullName\" placeholder=\"Nguy·ªÖn VƒÉn A\" /></div>\r\n            <div class=\"input\"><label>Email</label><input id=\"g_email\" placeholder=\"email@domain.com\" /></div>\r\n          </div>\r\n          <div class=\"row\">\r\n            <div class=\"input\"><label>S·ªë ƒëi·ªán tho·∫°i</label><input id=\"g_phone\" placeholder=\"09xx xxx xxx\" /></div>\r\n            <div class=\"input\"><label>ƒê·ªãa ch·ªâ giao h√†ng</label><input id=\"g_address\" placeholder=\"S·ªë nh√†, ƒë∆∞·ªùng, ph∆∞·ªùng/x√£, qu·∫≠n/huy·ªán, t·ªânh/th√†nh\" /></div>\r\n          </div>\r\n          ` : `\r\n          <div class=\"row\">\r\n            <div class=\"input\"><label>ƒê·ªãa ch·ªâ giao h√†ng</label><input id=\"l_address\" placeholder=\"Nh·∫≠p ƒë·ªãa ch·ªâ kh√°c (t√πy ch·ªçn)\" /></div>\r\n            <div class=\"input\"><label>Ghi ch√∫</label><input id=\"l_note\" placeholder=\"V√≠ d·ª•: Giao gi·ªù h√†nh ch√≠nh\" /></div>\r\n          </div>\r\n          `}\r\n  \r\n          <div class=\"divider\"></div>\r\n          <div style=\"display:flex;align-items:center;justify-content:space-between\">\r\n            <div class=\"muted\">T·∫°m t√≠nh</div>\r\n            <div><strong>${fmt(subtotal)}</strong></div>\r\n          </div>\r\n          <div style=\"display:flex;align-items:center;justify-content:space-between\">\r\n            <div class=\"muted\">Ph√≠ v·∫≠n chuy·ªÉn</div>\r\n            <div>Mi·ªÖn ph√≠</div>\r\n          </div>\r\n          <div style=\"display:flex;align-items:center;justify-content:space-between;font-size:18px\">\r\n            <div>T·ªïng</div>\r\n            <div><strong>${fmt(subtotal)}</strong></div>\r\n          </div>\r\n          <div style=\"display:flex;gap:10px;justify-content:flex-end\">\r\n            <button class=\"btn outline\" id=\"cancelCheckout\">H·ªßy</button>\r\n            <button class=\"btn\" id=\"confirmCheckout\">ƒê·∫∑t h√†ng</button>\r\n          </div>\r\n        </div>\r\n      `;\r\n  \r\n      $('#closeCheckout').onclick = closeCheckout;\r\n      $('#cancelCheckout').onclick = closeCheckout;\r\n  \r\n      $('#changeAddress') && ($('#changeAddress').onclick = () => {\r\n        promptChangeAddress();\r\n      });\r\n  \r\n      $('#confirmCheckout').onclick = async () => {\r\n        if (state.cart.length === 0) { toast('Gi·ªè h√†ng tr·ªëng'); return; }\r\n        let shippingAddress = '';\r\n        if (!state.user) {\r\n          const fullName = $('#g_fullName').value.trim();\r\n          const email = $('#g_email').value.trim();\r\n          const phone = $('#g_phone').value.trim();\r\n          const addressLine = $('#g_address').value.trim();\r\n          if (!fullName || !email || !addressLine) { toast('Vui l√≤ng nh·∫≠p h·ªç t√™n, email v√† ƒë·ªãa ch·ªâ'); return; }\r\n          await API.createAccountIfNeeded({ fullName, email, phone, addressLine });\r\n          shippingAddress = addressLine;\r\n        } else {\r\n          const alt = $('#l_address').value.trim();\r\n          if (alt) { shippingAddress = alt; }\r\n          else if (defaultAddress) { shippingAddress = defaultAddress.line1; }\r\n          else { toast('Vui l√≤ng nh·∫≠p ƒë·ªãa ch·ªâ giao h√†ng'); return; }\r\n        }\r\n  \r\n        const order = await API.placeOrder({ items: state.cart, shippingAddress });\r\n        closeCheckout();\r\n        renderHeader();\r\n        renderCartDropdown();\r\n        toast('ƒê·∫∑t h√†ng th√†nh c√¥ng! M√£ ƒë∆°n: ' + order.id);\r\n      };\r\n    }\r\n  \r\n    function promptChangeAddress() {\r\n      const input = prompt('Nh·∫≠p ƒë·ªãa ch·ªâ giao h√†ng m·ªõi:');\r\n      if (!input) return;\r\n      // Save as a temporary address (not default)\r\n      $('#l_address') && ($('#l_address').value = input);\r\n    }\r\n  \r\n    // ----------------------------- Toast -----------------------------\r\n    function toast(msg) {\r\n      let t = $('#toast');\r\n      if (!t) {\r\n        t = document.createElement('div');\r\n        t.id = 'toast';\r\n        t.style.position = 'fixed';\r\n        t.style.bottom = '20px';\r\n        t.style.right = '20px';\r\n        t.style.background = '#141a38';\r\n        t.style.border = '1px solid #223064';\r\n        t.style.color = 'white';\r\n        t.style.padding = '10px 14px';\r\n        t.style.borderRadius = '10px';\r\n        t.style.boxShadow = '0 6px 20px rgba(0,0,0,.25)';\r\n        t.style.zIndex = '200';\r\n        document.body.appendChild(t);\r\n      }\r\n      t.textContent = msg;\r\n      t.style.opacity = '1';\r\n      setTimeout(() => { t.style.opacity = '0'; }, 1800);\r\n    }\r\n  \r\n    // ----------------------------- Main Render -----------------------------\r\n    function render() {\r\n      injectStyles();\r\n      root.innerHTML = `\r\n        <nav id=\"nav\" class=\"nav\"></nav>\r\n        <main>\r\n          <div class=\"container\">${renderHero()}</div>\r\n          ${renderSections()}\r\n        </main>\r\n        <div class=\"modal\" id=\"checkoutModal\"><div class=\"panel\" id=\"checkoutPanel\"></div></div>\r\n        ${renderFooter()}\r\n      `;\r\n  \r\n      renderHeader();\r\n  \r\n      // Hook hero buttons & category grid\r\n      $('#shopNow').onclick = () => {\r\n        const firstAdd = $('[data-add]');\r\n        if (firstAdd) { firstAdd.click(); }\r\n        openCheckout();\r\n      };\r\n      $('#viewBest').onclick = () => {\r\n        window.scrollTo({ top: $('.section:nth-of-type(2)').offsetTop - 60, behavior: 'smooth' });\r\n      };\r\n      $('#memberBtn').onclick = () => toast('ƒêƒÉng nh·∫≠p ƒë·ªÉ nh·∫≠n ∆∞u ƒë√£i th√†nh vi√™n');\r\n  \r\n      // Category pills\r\n      $$('.pill').forEach(p => p.onclick = () => {\r\n        const cat = p.dataset.cat;\r\n        const grid = $('#catGrid');\r\n        const list = state.products.filter(x => x.category === cat).slice(0, 4);\r\n        grid.innerHTML = renderProductsGrid(list);\r\n        bindProductButtons(grid);\r\n      });\r\n      // default category view\r\n      const grid = $('#catGrid');\r\n      grid.innerHTML = renderProductsGrid(state.products.filter(p => p.category === CATEGORIES[0]).slice(0,4));\r\n      bindProductButtons(grid);\r\n  \r\n      // product sections buttons\r\n      $$('.section .grid').forEach(g => bindProductButtons(g));\r\n  \r\n      // modal close on outside click\r\n      $('#checkoutModal').addEventListener('click', (e) => {\r\n        if (e.target.id === 'checkoutModal') closeCheckout();\r\n      });\r\n    }\r\n  \r\n    function bindProductButtons(scopeEl) {\r\n      $$('button[data-add]', scopeEl).forEach(b => b.onclick = () => addToCart(b.dataset.add));\r\n      $$('button[data-buy]', scopeEl).forEach(b => b.onclick = () => buyNow(b.dataset.buy));\r\n    }\r\n  \r\n    // Initial mount\r\n    render();\r\n\r\n    window.Pages = window.Pages || {};\r\n    window.Pages.LandingPage = { mount };\r\n\r\n  })();"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}