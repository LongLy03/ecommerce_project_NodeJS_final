{"ast":null,"code":"var _jsxFileName = \"D:\\\\52200147\\\\HKVII\\\\NodeJS\\\\CK\\\\ecommerce_project_NodeJS_final\\\\frontend\\\\src\\\\pages\\\\admin\\\\ProductEdit.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport { AdminAPI, ProductAPI } from \"../../services/api\";\nimport { toast } from \"react-toastify\";\nimport Loader from \"../../components/common/Loader\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ProductEdit = () => {\n  _s();\n  const {\n    id\n  } = useParams(); // Nếu có ID -> Mode Edit, không có -> Mode Create\n  const navigate = useNavigate();\n  const isEditMode = !!id;\n  const [loading, setLoading] = useState(isEditMode);\n  const [categories, setCategories] = useState([]); // Danh sách danh mục để chọn\n\n  // State lưu trữ dữ liệu form\n  const [formData, setFormData] = useState({\n    name: \"\",\n    slug: \"\",\n    brand: \"\",\n    category: \"\",\n    price: 0,\n    description: \"\",\n    images: [],\n    // Mảng chứa link ảnh (string)\n    imageUrlInput: \"\",\n    // Input tạm để add link ảnh\n    variants: [] // Mảng chứa các biến thể sản phẩm\n  });\n\n  // State cho form thêm biến thể mới\n  const [newVariant, setNewVariant] = useState({\n    sku: \"\",\n    name: \"\",\n    price: 0,\n    stock: 0,\n    attributes: [] // [{ key: \"Màu\", value: \"Đỏ\" }]\n  });\n  const [showVariantForm, setShowVariantForm] = useState(false);\n  useEffect(() => {\n    const initData = async () => {\n      try {\n        // 1. Lấy danh mục\n        const cats = await AdminAPI.getCategories();\n        setCategories(cats);\n\n        // 2. Nếu là Edit, lấy chi tiết sản phẩm\n        if (isEditMode) {\n          var _product$category;\n          const product = await ProductAPI.getDetail(id);\n          setFormData({\n            name: product.name,\n            slug: product.slug,\n            brand: product.brand,\n            category: ((_product$category = product.category) === null || _product$category === void 0 ? void 0 : _product$category._id) || product.category,\n            price: product.price,\n            description: product.description,\n            // Xử lý ảnh: nếu là object {url: ...} thì lấy url, nếu là string thì giữ nguyên\n            images: product.images.map(img => typeof img === 'string' ? img : img.url),\n            imageUrlInput: \"\",\n            variants: product.variants || []\n          });\n        }\n      } catch (error) {\n        console.error(\"Init Data Error:\", error);\n        toast.error(\"Lỗi tải dữ liệu\");\n      } finally {\n        setLoading(false);\n      }\n    };\n    initData();\n  }, [id, isEditMode]);\n\n  // Xử lý nhập liệu cơ bản\n  const handleChange = e => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  // --- QUẢN LÝ HÌNH ẢNH ---\n  const handleAddImage = () => {\n    if (!formData.imageUrlInput) return;\n    setFormData({\n      ...formData,\n      images: [...formData.images, formData.imageUrlInput],\n      imageUrlInput: \"\"\n    });\n  };\n  const handleRemoveImage = index => {\n    const newImages = formData.images.filter((_, i) => i !== index);\n    setFormData({\n      ...formData,\n      images: newImages\n    });\n  };\n\n  // --- QUẢN LÝ BIẾN THỂ (VARIANTS) ---\n  const handleVariantChange = e => {\n    setNewVariant({\n      ...newVariant,\n      [e.target.name]: e.target.value\n    });\n  };\n  const handleAddVariant = () => {\n    // Validate cơ bản\n    if (!newVariant.sku || !newVariant.name || newVariant.price < 0 || newVariant.stock < 0) {\n      return toast.warning(\"Vui lòng nhập đầy đủ thông tin biến thể\");\n    }\n\n    // Tự động tạo attributes từ tên (Ví dụ tên \"Màu Đỏ\" -> attributes: [{key: \"Tên\", value: \"Màu Đỏ\"}])\n    // Hoặc bạn có thể làm form nhập attributes phức tạp hơn nếu cần\n    const variantToAdd = {\n      ...newVariant,\n      attributes: [{\n        key: \"Tên\",\n        value: newVariant.name\n      }]\n    };\n    setFormData({\n      ...formData,\n      variants: [...formData.variants, variantToAdd]\n    });\n\n    // Reset form\n    setNewVariant({\n      sku: \"\",\n      name: \"\",\n      price: 0,\n      stock: 0,\n      attributes: []\n    });\n    setShowVariantForm(false);\n  };\n  const handleRemoveVariant = index => {\n    if (!window.confirm(\"Xóa biến thể này?\")) return;\n    const newVariants = formData.variants.filter((_, i) => i !== index);\n    setFormData({\n      ...formData,\n      variants: newVariants\n    });\n  };\n\n  // --- SUBMIT FORM ---\n  const handleSubmit = async e => {\n    e.preventDefault();\n    try {\n      const payload = {\n        ...formData\n      };\n      delete payload.imageUrlInput; // Bỏ trường thừa\n\n      if (isEditMode) {\n        await AdminAPI.updateProduct(id, payload);\n        toast.success(\"Cập nhật sản phẩm thành công\");\n      } else {\n        await AdminAPI.addProduct(payload);\n        toast.success(\"Tạo sản phẩm mới thành công\");\n      }\n      navigate(\"/admin/products\");\n    } catch (error) {\n      console.error(\"Submit Error:\", error);\n      toast.error(error.message || \"Lỗi lưu sản phẩm\");\n    }\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 146,\n    columnNumber: 23\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container mt-4 mb-5\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex justify-content-between align-items-center mb-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"fw-bold text-primary\",\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: `fas ${isEditMode ? 'fa-edit' : 'fa-plus-circle'} me-2`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 11\n        }, this), isEditMode ? \"Chỉnh sửa sản phẩm\" : \"Thêm sản phẩm mới\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-outline-secondary\",\n        onClick: () => navigate(\"/admin/products\"),\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-arrow-left me-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 11\n        }, this), \"Quay l\\u1EA1i\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card shadow-sm border-0\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-body p-4\",\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSubmit,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-md-8\",\n              children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                className: \"mb-3 border-bottom pb-2 text-muted\",\n                children: \"Th\\xF4ng tin chung\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 166,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mb-3\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"form-label fw-bold\",\n                  children: [\"T\\xEAn s\\u1EA3n ph\\u1EA9m \", /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-danger\",\n                    children: \"*\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 169,\n                    columnNumber: 70\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 169,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  className: \"form-control\",\n                  name: \"name\",\n                  value: formData.name,\n                  onChange: handleChange,\n                  placeholder: \"V\\xED d\\u1EE5: Laptop Dell XPS 13\",\n                  required: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 170,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 168,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col-md-6 mb-3\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"form-label fw-bold\",\n                    children: [\"Slug (URL) \", /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-danger\",\n                      children: \"*\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 183,\n                      columnNumber: 70\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 183,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    className: \"form-control\",\n                    name: \"slug\",\n                    value: formData.slug,\n                    onChange: handleChange,\n                    placeholder: \"laptop-dell-xps-13\",\n                    required: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 184,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 182,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col-md-6 mb-3\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"form-label fw-bold\",\n                    children: [\"Th\\u01B0\\u01A1ng hi\\u1EC7u \", /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-danger\",\n                      children: \"*\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 195,\n                      columnNumber: 71\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 195,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    className: \"form-control\",\n                    name: \"brand\",\n                    value: formData.brand,\n                    onChange: handleChange,\n                    placeholder: \"Dell, Apple, Sony...\",\n                    required: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 196,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 194,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 181,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col-md-6 mb-3\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"form-label fw-bold\",\n                    children: [\"Danh m\\u1EE5c \", /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-danger\",\n                      children: \"*\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 210,\n                      columnNumber: 68\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 210,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                    className: \"form-select\",\n                    name: \"category\",\n                    value: formData.category,\n                    onChange: handleChange,\n                    required: true,\n                    children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"\",\n                      children: \"-- Ch\\u1ECDn danh m\\u1EE5c --\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 212,\n                      columnNumber: 23\n                    }, this), categories.map(cat => /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: cat._id,\n                      children: cat.name\n                    }, cat._id, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 214,\n                      columnNumber: 25\n                    }, this))]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 211,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 209,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col-md-6 mb-3\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"form-label fw-bold\",\n                    children: [\"Gi\\xE1 g\\u1ED1c (VN\\u0110) \", /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-danger\",\n                      children: \"*\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 219,\n                      columnNumber: 73\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 219,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"number\",\n                    className: \"form-control\",\n                    name: \"price\",\n                    value: formData.price,\n                    onChange: handleChange,\n                    min: \"0\",\n                    required: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 220,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 218,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 208,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mb-3\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"form-label fw-bold\",\n                  children: \"M\\xF4 t\\u1EA3 chi ti\\u1EBFt\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 233,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                  className: \"form-control\",\n                  rows: \"6\",\n                  name: \"description\",\n                  value: formData.description,\n                  onChange: handleChange,\n                  placeholder: \"Nh\\u1EADp m\\xF4 t\\u1EA3 s\\u1EA3n ph\\u1EA9m...\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 234,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 232,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mt-4\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"d-flex justify-content-between align-items-center mb-3 border-bottom pb-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                    className: \"mb-0 text-muted\",\n                    children: \"Bi\\u1EBFn th\\u1EC3 s\\u1EA3n ph\\u1EA9m (Variants)\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 247,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"button\",\n                    className: \"btn btn-sm btn-outline-primary\",\n                    onClick: () => setShowVariantForm(!showVariantForm),\n                    children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                      className: \"fas fa-plus me-1\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 253,\n                      columnNumber: 29\n                    }, this), \"Th\\xEAm bi\\u1EBFn th\\u1EC3\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 248,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 246,\n                  columnNumber: 21\n                }, this), showVariantForm && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"card bg-light mb-3 p-3\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"row g-2\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"col-md-3\",\n                      children: /*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"text\",\n                        className: \"form-control form-control-sm\",\n                        placeholder: \"SKU (M\\xE3 kho)\",\n                        name: \"sku\",\n                        value: newVariant.sku,\n                        onChange: handleVariantChange\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 262,\n                        columnNumber: 37\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 261,\n                      columnNumber: 33\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"col-md-3\",\n                      children: /*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"text\",\n                        className: \"form-control form-control-sm\",\n                        placeholder: \"T\\xEAn (VD: M\\xE0u \\u0110\\u1ECF)\",\n                        name: \"name\",\n                        value: newVariant.name,\n                        onChange: handleVariantChange\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 265,\n                        columnNumber: 37\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 264,\n                      columnNumber: 33\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"col-md-3\",\n                      children: /*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"number\",\n                        className: \"form-control form-control-sm\",\n                        placeholder: \"Gi\\xE1\",\n                        name: \"price\",\n                        value: newVariant.price,\n                        onChange: handleVariantChange\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 268,\n                        columnNumber: 37\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 267,\n                      columnNumber: 33\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"col-md-2\",\n                      children: /*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"number\",\n                        className: \"form-control form-control-sm\",\n                        placeholder: \"T\\u1ED3n kho\",\n                        name: \"stock\",\n                        value: newVariant.stock,\n                        onChange: handleVariantChange\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 271,\n                        columnNumber: 37\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 270,\n                      columnNumber: 33\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"col-md-1\",\n                      children: /*#__PURE__*/_jsxDEV(\"button\", {\n                        type: \"button\",\n                        className: \"btn btn-sm btn-success w-100\",\n                        onClick: handleAddVariant,\n                        children: /*#__PURE__*/_jsxDEV(\"i\", {\n                          className: \"fas fa-check\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 274,\n                          columnNumber: 127\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 274,\n                        columnNumber: 37\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 273,\n                      columnNumber: 33\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 260,\n                    columnNumber: 29\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 259,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"table-responsive\",\n                  children: /*#__PURE__*/_jsxDEV(\"table\", {\n                    className: \"table table-bordered table-sm\",\n                    children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                      className: \"table-light\",\n                      children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                        children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                          children: \"SKU\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 285,\n                          columnNumber: 37\n                        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                          children: \"T\\xEAn bi\\u1EBFn th\\u1EC3\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 286,\n                          columnNumber: 37\n                        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                          children: \"Gi\\xE1\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 287,\n                          columnNumber: 37\n                        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                          children: \"T\\u1ED3n kho\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 288,\n                          columnNumber: 37\n                        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                          style: {\n                            width: '50px'\n                          }\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 289,\n                          columnNumber: 37\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 284,\n                        columnNumber: 33\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 283,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                      children: [formData.variants.map((v, idx) => /*#__PURE__*/_jsxDEV(\"tr\", {\n                        children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                          children: v.sku\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 295,\n                          columnNumber: 41\n                        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                          children: v.name\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 296,\n                          columnNumber: 41\n                        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                          children: new Intl.NumberFormat('vi-VN').format(v.price)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 297,\n                          columnNumber: 41\n                        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                          children: v.stock\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 298,\n                          columnNumber: 41\n                        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                          className: \"text-center\",\n                          children: /*#__PURE__*/_jsxDEV(\"button\", {\n                            type: \"button\",\n                            className: \"btn btn-xs text-danger\",\n                            onClick: () => handleRemoveVariant(idx),\n                            children: /*#__PURE__*/_jsxDEV(\"i\", {\n                              className: \"fas fa-trash\"\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 301,\n                              columnNumber: 49\n                            }, this)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 300,\n                            columnNumber: 45\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 299,\n                          columnNumber: 41\n                        }, this)]\n                      }, idx, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 294,\n                        columnNumber: 37\n                      }, this)), formData.variants.length === 0 && /*#__PURE__*/_jsxDEV(\"tr\", {\n                        children: /*#__PURE__*/_jsxDEV(\"td\", {\n                          colSpan: \"5\",\n                          className: \"text-center text-muted small\",\n                          children: \"Ch\\u01B0a c\\xF3 bi\\u1EBFn th\\u1EC3 n\\xE0o.\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 307,\n                          columnNumber: 41\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 307,\n                        columnNumber: 37\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 292,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 282,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 281,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 245,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-md-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                className: \"mb-3 border-bottom pb-2 text-muted\",\n                children: \"H\\xECnh \\u1EA3nh\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 317,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mb-3\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"form-label small\",\n                  children: \"Th\\xEAm link \\u1EA3nh m\\u1EDBi\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 320,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"input-group input-group-sm\",\n                  children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    className: \"form-control\",\n                    placeholder: \"https://example.com/image.jpg\",\n                    name: \"imageUrlInput\",\n                    value: formData.imageUrlInput,\n                    onChange: handleChange\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 322,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"button\",\n                    className: \"btn btn-primary\",\n                    onClick: handleAddImage,\n                    children: /*#__PURE__*/_jsxDEV(\"i\", {\n                      className: \"fas fa-plus\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 331,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 330,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 321,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-text text-muted\",\n                  style: {\n                    fontSize: '0.8rem'\n                  },\n                  children: \"Khuy\\xEAn d\\xF9ng link \\u1EA3nh online (Unsplash, Imgur...) \\u0111\\u1EC3 hi\\u1EC3n th\\u1ECB t\\u1ED1t nh\\u1EA5t.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 334,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 319,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"d-flex flex-wrap gap-2 mt-3 p-2 border rounded bg-light\",\n                style: {\n                  minHeight: '100px'\n                },\n                children: [formData.images.map((url, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"position-relative\",\n                  style: {\n                    width: \"90px\",\n                    height: \"90px\"\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                    src: url,\n                    alt: \"\",\n                    className: \"w-100 h-100 object-fit-cover rounded border bg-white\",\n                    onError: e => {\n                      e.target.src = \"https://via.placeholder.com/90?text=Error\";\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 342,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"button\",\n                    className: \"btn btn-sm btn-danger position-absolute top-0 end-0 p-0 rounded-circle shadow-sm\",\n                    style: {\n                      width: \"20px\",\n                      height: \"20px\",\n                      lineHeight: \"10px\",\n                      transform: \"translate(30%, -30%)\"\n                    },\n                    onClick: () => handleRemoveImage(idx),\n                    children: \"\\xD7\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 348,\n                    columnNumber: 25\n                  }, this)]\n                }, idx, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 341,\n                  columnNumber: 21\n                }, this)), formData.images.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-100 text-center align-self-center text-muted small\",\n                  children: \"Ch\\u01B0a c\\xF3 \\u1EA3nh\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 359,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 339,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 316,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n            className: \"my-4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 365,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-flex justify-content-end gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"btn btn-secondary px-4\",\n              onClick: () => navigate(\"/admin/products\"),\n              children: \"H\\u1EE7y b\\u1ECF\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 367,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              className: \"btn btn-success px-5 fw-bold shadow-sm\",\n              children: isEditMode ? \"Lưu thay đổi\" : \"Tạo sản phẩm\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 370,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 366,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 149,\n    columnNumber: 5\n  }, this);\n};\n_s(ProductEdit, \"/Ceq9zraBAdx66lYJ3+b8J0S+XM=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = ProductEdit;\nexport default ProductEdit;\nvar _c;\n$RefreshReg$(_c, \"ProductEdit\");","map":{"version":3,"names":["React","useEffect","useState","useNavigate","useParams","AdminAPI","ProductAPI","toast","Loader","jsxDEV","_jsxDEV","ProductEdit","_s","id","navigate","isEditMode","loading","setLoading","categories","setCategories","formData","setFormData","name","slug","brand","category","price","description","images","imageUrlInput","variants","newVariant","setNewVariant","sku","stock","attributes","showVariantForm","setShowVariantForm","initData","cats","getCategories","_product$category","product","getDetail","_id","map","img","url","error","console","handleChange","e","target","value","handleAddImage","handleRemoveImage","index","newImages","filter","_","i","handleVariantChange","handleAddVariant","warning","variantToAdd","key","handleRemoveVariant","window","confirm","newVariants","handleSubmit","preventDefault","payload","updateProduct","success","addProduct","message","fileName","_jsxFileName","lineNumber","columnNumber","className","children","onClick","onSubmit","type","onChange","placeholder","required","cat","min","rows","style","width","v","idx","Intl","NumberFormat","format","length","colSpan","fontSize","minHeight","height","src","alt","onError","lineHeight","transform","_c","$RefreshReg$"],"sources":["D:/52200147/HKVII/NodeJS/CK/ecommerce_project_NodeJS_final/frontend/src/pages/admin/ProductEdit.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useNavigate, useParams } from \"react-router-dom\";\r\nimport { AdminAPI, ProductAPI } from \"../../services/api\";\r\nimport { toast } from \"react-toastify\";\r\nimport Loader from \"../../components/common/Loader\";\r\n\r\nconst ProductEdit = () => {\r\n  const { id } = useParams(); // Nếu có ID -> Mode Edit, không có -> Mode Create\r\n  const navigate = useNavigate();\r\n  const isEditMode = !!id;\r\n\r\n  const [loading, setLoading] = useState(isEditMode);\r\n  const [categories, setCategories] = useState([]); // Danh sách danh mục để chọn\r\n  \r\n  // State lưu trữ dữ liệu form\r\n  const [formData, setFormData] = useState({\r\n    name: \"\",\r\n    slug: \"\",\r\n    brand: \"\",\r\n    category: \"\",\r\n    price: 0,\r\n    description: \"\",\r\n    images: [], // Mảng chứa link ảnh (string)\r\n    imageUrlInput: \"\", // Input tạm để add link ảnh\r\n    variants: [] // Mảng chứa các biến thể sản phẩm\r\n  });\r\n\r\n  // State cho form thêm biến thể mới\r\n  const [newVariant, setNewVariant] = useState({\r\n    sku: \"\",\r\n    name: \"\",\r\n    price: 0,\r\n    stock: 0,\r\n    attributes: [] // [{ key: \"Màu\", value: \"Đỏ\" }]\r\n  });\r\n  const [showVariantForm, setShowVariantForm] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const initData = async () => {\r\n      try {\r\n        // 1. Lấy danh mục\r\n        const cats = await AdminAPI.getCategories(); \r\n        setCategories(cats);\r\n\r\n        // 2. Nếu là Edit, lấy chi tiết sản phẩm\r\n        if (isEditMode) {\r\n          const product = await ProductAPI.getDetail(id);\r\n          setFormData({\r\n            name: product.name,\r\n            slug: product.slug,\r\n            brand: product.brand,\r\n            category: product.category?._id || product.category, \r\n            price: product.price,\r\n            description: product.description,\r\n            // Xử lý ảnh: nếu là object {url: ...} thì lấy url, nếu là string thì giữ nguyên\r\n            images: product.images.map(img => typeof img === 'string' ? img : img.url),\r\n            imageUrlInput: \"\",\r\n            variants: product.variants || []\r\n          });\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Init Data Error:\", error);\r\n        toast.error(\"Lỗi tải dữ liệu\");\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    initData();\r\n  }, [id, isEditMode]);\r\n\r\n  // Xử lý nhập liệu cơ bản\r\n  const handleChange = (e) => {\r\n    setFormData({ ...formData, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  // --- QUẢN LÝ HÌNH ẢNH ---\r\n  const handleAddImage = () => {\r\n    if (!formData.imageUrlInput) return;\r\n    setFormData({\r\n      ...formData,\r\n      images: [...formData.images, formData.imageUrlInput],\r\n      imageUrlInput: \"\"\r\n    });\r\n  };\r\n\r\n  const handleRemoveImage = (index) => {\r\n    const newImages = formData.images.filter((_, i) => i !== index);\r\n    setFormData({ ...formData, images: newImages });\r\n  };\r\n\r\n  // --- QUẢN LÝ BIẾN THỂ (VARIANTS) ---\r\n  const handleVariantChange = (e) => {\r\n    setNewVariant({ ...newVariant, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleAddVariant = () => {\r\n    // Validate cơ bản\r\n    if (!newVariant.sku || !newVariant.name || newVariant.price < 0 || newVariant.stock < 0) {\r\n        return toast.warning(\"Vui lòng nhập đầy đủ thông tin biến thể\");\r\n    }\r\n\r\n    // Tự động tạo attributes từ tên (Ví dụ tên \"Màu Đỏ\" -> attributes: [{key: \"Tên\", value: \"Màu Đỏ\"}])\r\n    // Hoặc bạn có thể làm form nhập attributes phức tạp hơn nếu cần\r\n    const variantToAdd = {\r\n        ...newVariant,\r\n        attributes: [{ key: \"Tên\", value: newVariant.name }] \r\n    };\r\n\r\n    setFormData({\r\n        ...formData,\r\n        variants: [...formData.variants, variantToAdd]\r\n    });\r\n\r\n    // Reset form\r\n    setNewVariant({ sku: \"\", name: \"\", price: 0, stock: 0, attributes: [] });\r\n    setShowVariantForm(false);\r\n  };\r\n\r\n  const handleRemoveVariant = (index) => {\r\n      if(!window.confirm(\"Xóa biến thể này?\")) return;\r\n      const newVariants = formData.variants.filter((_, i) => i !== index);\r\n      setFormData({ ...formData, variants: newVariants });\r\n  };\r\n\r\n  // --- SUBMIT FORM ---\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      const payload = { ...formData };\r\n      delete payload.imageUrlInput; // Bỏ trường thừa\r\n\r\n      if (isEditMode) {\r\n        await AdminAPI.updateProduct(id, payload);\r\n        toast.success(\"Cập nhật sản phẩm thành công\");\r\n      } else {\r\n        await AdminAPI.addProduct(payload);\r\n        toast.success(\"Tạo sản phẩm mới thành công\");\r\n      }\r\n      navigate(\"/admin/products\");\r\n    } catch (error) {\r\n      console.error(\"Submit Error:\", error);\r\n      toast.error(error.message || \"Lỗi lưu sản phẩm\");\r\n    }\r\n  };\r\n\r\n  if (loading) return <Loader />;\r\n\r\n  return (\r\n    <div className=\"container mt-4 mb-5\">\r\n      <div className=\"d-flex justify-content-between align-items-center mb-4\">\r\n        <h2 className=\"fw-bold text-primary\">\r\n          <i className={`fas ${isEditMode ? 'fa-edit' : 'fa-plus-circle'} me-2`}></i>\r\n          {isEditMode ? \"Chỉnh sửa sản phẩm\" : \"Thêm sản phẩm mới\"}\r\n        </h2>\r\n        <button className=\"btn btn-outline-secondary\" onClick={() => navigate(\"/admin/products\")}>\r\n          <i className=\"fas fa-arrow-left me-2\"></i>Quay lại\r\n        </button>\r\n      </div>\r\n\r\n      <div className=\"card shadow-sm border-0\">\r\n        <div className=\"card-body p-4\">\r\n          <form onSubmit={handleSubmit}>\r\n            <div className=\"row\">\r\n              {/* CỘT TRÁI: Thông tin chính */}\r\n              <div className=\"col-md-8\">\r\n                <h5 className=\"mb-3 border-bottom pb-2 text-muted\">Thông tin chung</h5>\r\n                \r\n                <div className=\"mb-3\">\r\n                  <label className=\"form-label fw-bold\">Tên sản phẩm <span className=\"text-danger\">*</span></label>\r\n                  <input \r\n                    type=\"text\" \r\n                    className=\"form-control\" \r\n                    name=\"name\" \r\n                    value={formData.name} \r\n                    onChange={handleChange} \r\n                    placeholder=\"Ví dụ: Laptop Dell XPS 13\"\r\n                    required \r\n                  />\r\n                </div>\r\n                \r\n                <div className=\"row\">\r\n                  <div className=\"col-md-6 mb-3\">\r\n                    <label className=\"form-label fw-bold\">Slug (URL) <span className=\"text-danger\">*</span></label>\r\n                    <input \r\n                        type=\"text\" \r\n                        className=\"form-control\" \r\n                        name=\"slug\" \r\n                        value={formData.slug} \r\n                        onChange={handleChange} \r\n                        placeholder=\"laptop-dell-xps-13\"\r\n                        required \r\n                    />\r\n                  </div>\r\n                  <div className=\"col-md-6 mb-3\">\r\n                    <label className=\"form-label fw-bold\">Thương hiệu <span className=\"text-danger\">*</span></label>\r\n                    <input \r\n                        type=\"text\" \r\n                        className=\"form-control\" \r\n                        name=\"brand\" \r\n                        value={formData.brand} \r\n                        onChange={handleChange} \r\n                        placeholder=\"Dell, Apple, Sony...\"\r\n                        required \r\n                    />\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"row\">\r\n                  <div className=\"col-md-6 mb-3\">\r\n                    <label className=\"form-label fw-bold\">Danh mục <span className=\"text-danger\">*</span></label>\r\n                    <select className=\"form-select\" name=\"category\" value={formData.category} onChange={handleChange} required>\r\n                      <option value=\"\">-- Chọn danh mục --</option>\r\n                      {categories.map(cat => (\r\n                        <option key={cat._id} value={cat._id}>{cat.name}</option>\r\n                      ))}\r\n                    </select>\r\n                  </div>\r\n                  <div className=\"col-md-6 mb-3\">\r\n                    <label className=\"form-label fw-bold\">Giá gốc (VNĐ) <span className=\"text-danger\">*</span></label>\r\n                    <input \r\n                        type=\"number\" \r\n                        className=\"form-control\" \r\n                        name=\"price\" \r\n                        value={formData.price} \r\n                        onChange={handleChange} \r\n                        min=\"0\"\r\n                        required \r\n                    />\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"mb-3\">\r\n                  <label className=\"form-label fw-bold\">Mô tả chi tiết</label>\r\n                  <textarea \r\n                    className=\"form-control\" \r\n                    rows=\"6\" \r\n                    name=\"description\" \r\n                    value={formData.description} \r\n                    onChange={handleChange}\r\n                    placeholder=\"Nhập mô tả sản phẩm...\"\r\n                  ></textarea>\r\n                </div>\r\n\r\n                {/* QUẢN LÝ BIẾN THỂ */}\r\n                <div className=\"mt-4\">\r\n                    <div className=\"d-flex justify-content-between align-items-center mb-3 border-bottom pb-2\">\r\n                        <h5 className=\"mb-0 text-muted\">Biến thể sản phẩm (Variants)</h5>\r\n                        <button \r\n                            type=\"button\" \r\n                            className=\"btn btn-sm btn-outline-primary\"\r\n                            onClick={() => setShowVariantForm(!showVariantForm)}\r\n                        >\r\n                            <i className=\"fas fa-plus me-1\"></i>Thêm biến thể\r\n                        </button>\r\n                    </div>\r\n\r\n                    {/* Form thêm biến thể */}\r\n                    {showVariantForm && (\r\n                        <div className=\"card bg-light mb-3 p-3\">\r\n                            <div className=\"row g-2\">\r\n                                <div className=\"col-md-3\">\r\n                                    <input type=\"text\" className=\"form-control form-control-sm\" placeholder=\"SKU (Mã kho)\" name=\"sku\" value={newVariant.sku} onChange={handleVariantChange} />\r\n                                </div>\r\n                                <div className=\"col-md-3\">\r\n                                    <input type=\"text\" className=\"form-control form-control-sm\" placeholder=\"Tên (VD: Màu Đỏ)\" name=\"name\" value={newVariant.name} onChange={handleVariantChange} />\r\n                                </div>\r\n                                <div className=\"col-md-3\">\r\n                                    <input type=\"number\" className=\"form-control form-control-sm\" placeholder=\"Giá\" name=\"price\" value={newVariant.price} onChange={handleVariantChange} />\r\n                                </div>\r\n                                <div className=\"col-md-2\">\r\n                                    <input type=\"number\" className=\"form-control form-control-sm\" placeholder=\"Tồn kho\" name=\"stock\" value={newVariant.stock} onChange={handleVariantChange} />\r\n                                </div>\r\n                                <div className=\"col-md-1\">\r\n                                    <button type=\"button\" className=\"btn btn-sm btn-success w-100\" onClick={handleAddVariant}><i className=\"fas fa-check\"></i></button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Danh sách biến thể */}\r\n                    <div className=\"table-responsive\">\r\n                        <table className=\"table table-bordered table-sm\">\r\n                            <thead className=\"table-light\">\r\n                                <tr>\r\n                                    <th>SKU</th>\r\n                                    <th>Tên biến thể</th>\r\n                                    <th>Giá</th>\r\n                                    <th>Tồn kho</th>\r\n                                    <th style={{width: '50px'}}></th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                {formData.variants.map((v, idx) => (\r\n                                    <tr key={idx}>\r\n                                        <td>{v.sku}</td>\r\n                                        <td>{v.name}</td>\r\n                                        <td>{new Intl.NumberFormat('vi-VN').format(v.price)}</td>\r\n                                        <td>{v.stock}</td>\r\n                                        <td className=\"text-center\">\r\n                                            <button type=\"button\" className=\"btn btn-xs text-danger\" onClick={() => handleRemoveVariant(idx)}>\r\n                                                <i className=\"fas fa-trash\"></i>\r\n                                            </button>\r\n                                        </td>\r\n                                    </tr>\r\n                                ))}\r\n                                {formData.variants.length === 0 && (\r\n                                    <tr><td colSpan=\"5\" className=\"text-center text-muted small\">Chưa có biến thể nào.</td></tr>\r\n                                )}\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* CỘT PHẢI: Hình ảnh */}\r\n              <div className=\"col-md-4\">\r\n                <h5 className=\"mb-3 border-bottom pb-2 text-muted\">Hình ảnh</h5>\r\n                \r\n                <div className=\"mb-3\">\r\n                    <label className=\"form-label small\">Thêm link ảnh mới</label>\r\n                    <div className=\"input-group input-group-sm\">\r\n                        <input \r\n                        type=\"text\" \r\n                        className=\"form-control\" \r\n                        placeholder=\"https://example.com/image.jpg\" \r\n                        name=\"imageUrlInput\"\r\n                        value={formData.imageUrlInput}\r\n                        onChange={handleChange}\r\n                        />\r\n                        <button type=\"button\" className=\"btn btn-primary\" onClick={handleAddImage}>\r\n                            <i className=\"fas fa-plus\"></i>\r\n                        </button>\r\n                    </div>\r\n                    <div className=\"form-text text-muted\" style={{fontSize: '0.8rem'}}>\r\n                        Khuyên dùng link ảnh online (Unsplash, Imgur...) để hiển thị tốt nhất.\r\n                    </div>\r\n                </div>\r\n                \r\n                <div className=\"d-flex flex-wrap gap-2 mt-3 p-2 border rounded bg-light\" style={{minHeight: '100px'}}>\r\n                    {formData.images.map((url, idx) => (\r\n                    <div key={idx} className=\"position-relative\" style={{width: \"90px\", height: \"90px\"}}>\r\n                        <img \r\n                            src={url} \r\n                            alt=\"\" \r\n                            className=\"w-100 h-100 object-fit-cover rounded border bg-white\" \r\n                            onError={(e) => {e.target.src=\"https://via.placeholder.com/90?text=Error\"}}\r\n                        />\r\n                        <button \r\n                        type=\"button\"\r\n                        className=\"btn btn-sm btn-danger position-absolute top-0 end-0 p-0 rounded-circle shadow-sm\" \r\n                        style={{width: \"20px\", height: \"20px\", lineHeight: \"10px\", transform: \"translate(30%, -30%)\"}}\r\n                        onClick={() => handleRemoveImage(idx)}\r\n                        >\r\n                        &times;\r\n                        </button>\r\n                    </div>\r\n                    ))}\r\n                    {formData.images.length === 0 && (\r\n                        <div className=\"w-100 text-center align-self-center text-muted small\">Chưa có ảnh</div>\r\n                    )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <hr className=\"my-4\" />\r\n            <div className=\"d-flex justify-content-end gap-2\">\r\n                <button type=\"button\" className=\"btn btn-secondary px-4\" onClick={() => navigate(\"/admin/products\")}>\r\n                    Hủy bỏ\r\n                </button>\r\n                <button type=\"submit\" className=\"btn btn-success px-5 fw-bold shadow-sm\">\r\n                    {isEditMode ? \"Lưu thay đổi\" : \"Tạo sản phẩm\"}\r\n                </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProductEdit;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}