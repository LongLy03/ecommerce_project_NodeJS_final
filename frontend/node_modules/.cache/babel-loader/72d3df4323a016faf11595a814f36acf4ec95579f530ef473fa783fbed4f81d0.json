{"ast":null,"code":"// src/services/storage.js\nconst KEY = 'cart_items';\nexport const CartStore = {\n  all() {\n    try {\n      return JSON.parse(localStorage.getItem(KEY)) || [];\n    } catch {\n      return [];\n    }\n  },\n  save(items) {\n    localStorage.setItem(KEY, JSON.stringify(items));\n  },\n  add(item) {\n    const list = CartStore.all();\n    const idx = list.findIndex(x => x.productId === item.productId && x.variantId === item.variantId);\n    if (idx >= 0) {\n      list[idx].qty += item.qty || 1;\n    } else {\n      list.push({\n        ...item,\n        qty: item.qty || 1\n      });\n    }\n    CartStore.save(list);\n    return list;\n  },\n  remove(productId, variantId) {\n    const list = CartStore.all().filter(x => !(x.productId === productId && x.variantId === variantId));\n    CartStore.save(list);\n    return list;\n  },\n  clear() {\n    localStorage.removeItem(KEY);\n  }\n};","map":{"version":3,"names":["KEY","CartStore","all","JSON","parse","localStorage","getItem","save","items","setItem","stringify","add","item","list","idx","findIndex","x","productId","variantId","qty","push","remove","filter","clear","removeItem"],"sources":["D:/52200147/HKVII/NodeJS/CK/ecommerce_project_NodeJS_final/frontend/src/services/storage.jsx"],"sourcesContent":["// src/services/storage.js\r\nconst KEY = 'cart_items';\r\n\r\nexport const CartStore = {\r\n    all() {\r\n        try { return JSON.parse(localStorage.getItem(KEY)) || []; } catch { return []; }\r\n    },\r\n    save(items) { localStorage.setItem(KEY, JSON.stringify(items)); },\r\n    add(item) {\r\n        const list = CartStore.all();\r\n        const idx = list.findIndex(x => x.productId === item.productId && x.variantId === item.variantId);\r\n        if (idx >= 0) { list[idx].qty += item.qty || 1; } else { list.push({...item, qty: item.qty || 1 }); }\r\n        CartStore.save(list);\r\n        return list;\r\n    },\r\n    remove(productId, variantId) {\r\n        const list = CartStore.all().filter(x => !(x.productId === productId && x.variantId === variantId));\r\n        CartStore.save(list);\r\n        return list;\r\n    },\r\n    clear() { localStorage.removeItem(KEY); }\r\n};"],"mappings":"AAAA;AACA,MAAMA,GAAG,GAAG,YAAY;AAExB,OAAO,MAAMC,SAAS,GAAG;EACrBC,GAAGA,CAAA,EAAG;IACF,IAAI;MAAE,OAAOC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAACN,GAAG,CAAC,CAAC,IAAI,EAAE;IAAE,CAAC,CAAC,MAAM;MAAE,OAAO,EAAE;IAAE;EACnF,CAAC;EACDO,IAAIA,CAACC,KAAK,EAAE;IAAEH,YAAY,CAACI,OAAO,CAACT,GAAG,EAAEG,IAAI,CAACO,SAAS,CAACF,KAAK,CAAC,CAAC;EAAE,CAAC;EACjEG,GAAGA,CAACC,IAAI,EAAE;IACN,MAAMC,IAAI,GAAGZ,SAAS,CAACC,GAAG,CAAC,CAAC;IAC5B,MAAMY,GAAG,GAAGD,IAAI,CAACE,SAAS,CAACC,CAAC,IAAIA,CAAC,CAACC,SAAS,KAAKL,IAAI,CAACK,SAAS,IAAID,CAAC,CAACE,SAAS,KAAKN,IAAI,CAACM,SAAS,CAAC;IACjG,IAAIJ,GAAG,IAAI,CAAC,EAAE;MAAED,IAAI,CAACC,GAAG,CAAC,CAACK,GAAG,IAAIP,IAAI,CAACO,GAAG,IAAI,CAAC;IAAE,CAAC,MAAM;MAAEN,IAAI,CAACO,IAAI,CAAC;QAAC,GAAGR,IAAI;QAAEO,GAAG,EAAEP,IAAI,CAACO,GAAG,IAAI;MAAE,CAAC,CAAC;IAAE;IACpGlB,SAAS,CAACM,IAAI,CAACM,IAAI,CAAC;IACpB,OAAOA,IAAI;EACf,CAAC;EACDQ,MAAMA,CAACJ,SAAS,EAAEC,SAAS,EAAE;IACzB,MAAML,IAAI,GAAGZ,SAAS,CAACC,GAAG,CAAC,CAAC,CAACoB,MAAM,CAACN,CAAC,IAAI,EAAEA,CAAC,CAACC,SAAS,KAAKA,SAAS,IAAID,CAAC,CAACE,SAAS,KAAKA,SAAS,CAAC,CAAC;IACnGjB,SAAS,CAACM,IAAI,CAACM,IAAI,CAAC;IACpB,OAAOA,IAAI;EACf,CAAC;EACDU,KAAKA,CAAA,EAAG;IAAElB,YAAY,CAACmB,UAAU,CAACxB,GAAG,CAAC;EAAE;AAC5C,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}