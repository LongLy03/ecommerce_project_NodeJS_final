{"ast":null,"code":"// src/pages/CheckoutPage.js\n(function () {\n  function mount(root) {\n    const items = window.Cart.all();\n    if (!items.length) {\n      root.innerHTML = `\n                <div class=\"p-6 text-center\">\n                    <h3>üõí Gi·ªè h√†ng c·ªßa b·∫°n ƒëang tr·ªëng</h3>\n                    <a href=\"#/catalog\" class=\"btn mt-3\">‚¨Ö Quay l·∫°i c·ª≠a h√†ng</a>\n                </div>\n            `;\n      return;\n    }\n    const total = items.reduce((sum, it) => sum + (it.price || 0) * (it.qty || 1), 0);\n\n    // HTML giao di·ªán trang checkout\n    root.innerHTML = `\n        <div class=\"checkout-container p-6\">\n            <h2 class=\"text-2xl font-bold mb-4 border-b pb-2\">üßæ Thanh to√°n ƒë∆°n h√†ng</h2>\n\n            <div class=\"checkout-content\" style=\"display: grid; grid-template-columns: 2fr 1fr; gap: 20px;\">\n                <!-- Form th√¥ng tin ng∆∞·ªùi nh·∫≠n -->\n                <div class=\"shipping-info card p-4 border rounded shadow-sm bg-white\">\n                    <h3 class=\"text-lg font-semibold mb-3\">Th√¥ng tin giao h√†ng</h3>\n                    <form id=\"frm\" class=\"flex flex-col gap-3\">\n\n                        <div>\n                            <label>H·ªç v√† t√™n</label>\n                            <input name=\"fullname\" class=\"form-control\" placeholder=\"Nh·∫≠p h·ªç t√™n ƒë·∫ßy ƒë·ªß\" required />\n                        </div>\n\n                        <div>\n                            <label>ƒê·ªãa ch·ªâ giao h√†ng</label>\n                            <input name=\"address\" class=\"form-control\" placeholder=\"Nh·∫≠p ƒë·ªãa ch·ªâ c·ª• th·ªÉ\" required />\n                        </div>\n\n                        <div>\n                            <label>S·ªë ƒëi·ªán tho·∫°i</label>\n                            <input name=\"phone\" class=\"form-control\" placeholder=\"Nh·∫≠p s·ªë ƒëi·ªán tho·∫°i\" required />\n                        </div>\n\n                        <div>\n                            <label>Ghi ch√∫ (tu·ª≥ ch·ªçn)</label>\n                            <textarea name=\"note\" class=\"form-control\" rows=\"2\" placeholder=\"V√≠ d·ª•: Giao trong gi·ªù h√†nh ch√≠nh...\"></textarea>\n                        </div>\n\n                        <div>\n                            <label>Ph∆∞∆°ng th·ª©c thanh to√°n</label>\n                            <div class=\"payment-options mt-2\">\n                                <label class=\"payment-option\">\n                                    <input type=\"radio\" name=\"payment_method\" value=\"COD\" checked />\n                                    <span>üíµ Thanh to√°n khi nh·∫≠n h√†ng (COD)</span>\n                                </label>\n                                <label class=\"payment-option\">\n                                    <input type=\"radio\" name=\"payment_method\" value=\"BANK\" />\n                                    <span>üè¶ Chuy·ªÉn kho·∫£n ng√¢n h√†ng</span>\n                                </label>\n                                <label class=\"payment-option\">\n                                    <input type=\"radio\" name=\"payment_method\" value=\"E_WALLET\" />\n                                    <span>üì± V√≠ ƒëi·ªán t·ª≠ (Momo, ZaloPay...)</span>\n                                </label>\n                                <label class=\"payment-option\">\n                                    <input type=\"radio\" name=\"payment_method\" value=\"CARD\" />\n                                    <span>üí≥ Th·∫ª t√≠n d·ª•ng / ghi n·ª£</span>\n                                </label>\n                            </div>\n                        </div>\n\n                        <button class=\"btn btn-primary mt-4 w-full\" type=\"submit\">X√°c nh·∫≠n ƒë·∫∑t h√†ng</button>\n                    </form>\n\n                    <div id=\"msg\" class=\"mt-3 text-center\"></div>\n                </div>\n\n                <!-- T√≥m t·∫Øt ƒë∆°n h√†ng -->\n                <div class=\"order-summary card p-4 border rounded shadow-sm bg-white\">\n                    <h3 class=\"text-lg font-semibold mb-3\">T√≥m t·∫Øt ƒë∆°n h√†ng</h3>\n                    <div class=\"order-items mb-3\">\n                        ${items.map(it => `\n                            <div class=\"flex justify-between mb-2 border-b pb-1\">\n                                <div>\n                                    <div class=\"font-medium\">${it.name}</div>\n                                    <div class=\"text-sm text-gray-600\">S·ªë l∆∞·ª£ng: ${it.qty}</div>\n                                </div>\n                                <div class=\"text-right font-semibold\">${(it.price * it.qty).toLocaleString()} ƒë</div>\n                            </div>\n                        `).join('')}\n                    </div>\n\n                    <hr class=\"my-2\">\n                    <div class=\"flex justify-between text-lg font-bold\">\n                        <span>T·ªïng c·ªông:</span>\n                        <span>${total.toLocaleString()} ƒë</span>\n                    </div>\n                </div>\n            </div>\n        </div>\n        `;\n\n    // X·ª≠ l√Ω submit form\n    const form = root.querySelector('#frm');\n    const msg = root.querySelector('#msg');\n    form.addEventListener('submit', async e => {\n      e.preventDefault();\n      const data = Object.fromEntries(new FormData(form).entries());\n      try {\n        await window.Api.OrderAPI.create({\n          items,\n          shipping: data,\n          payment_method: data.payment_method\n        });\n        window.Cart.clear();\n        msg.innerHTML = `<div class=\"text-green-600 font-semibold\">‚úÖ ƒê·∫∑t h√†ng th√†nh c√¥ng! C·∫£m ∆°n b·∫°n ƒë√£ mua s·∫Øm.</div>`;\n        setTimeout(() => location.hash = '#/profile', 1500);\n      } catch (err) {\n        msg.innerHTML = `<div class=\"text-red-600\">‚ùå L·ªói ƒë·∫∑t h√†ng: ${err.message}</div>`;\n      }\n    });\n  }\n\n  // G·∫Øn v√†o h·ªá th·ªëng SPA\n  window.Pages = window.Pages || {};\n  window.Pages.CheckoutPage = {\n    mount\n  };\n})();","map":{"version":3,"names":["mount","root","items","window","Cart","all","length","innerHTML","total","reduce","sum","it","price","qty","map","name","toLocaleString","join","form","querySelector","msg","addEventListener","e","preventDefault","data","Object","fromEntries","FormData","entries","Api","OrderAPI","create","shipping","payment_method","clear","setTimeout","location","hash","err","message","Pages","CheckoutPage"],"sources":["D:/DaiHoc/Nam4/HKI/NodeJS/Final/ecommerce_project_NodeJS_final/frontend/src/pages/product/CheckoutPage.js"],"sourcesContent":["// src/pages/CheckoutPage.js\r\n(function() {\r\n        function mount(root) {\r\n            const items = window.Cart.all();\r\n            if (!items.length) {\r\n                root.innerHTML = `\r\n                <div class=\"p-6 text-center\">\r\n                    <h3>üõí Gi·ªè h√†ng c·ªßa b·∫°n ƒëang tr·ªëng</h3>\r\n                    <a href=\"#/catalog\" class=\"btn mt-3\">‚¨Ö Quay l·∫°i c·ª≠a h√†ng</a>\r\n                </div>\r\n            `;\r\n                return;\r\n            }\r\n\r\n            const total = items.reduce((sum, it) => sum + (it.price || 0) * (it.qty || 1), 0);\r\n\r\n            // HTML giao di·ªán trang checkout\r\n            root.innerHTML = `\r\n        <div class=\"checkout-container p-6\">\r\n            <h2 class=\"text-2xl font-bold mb-4 border-b pb-2\">üßæ Thanh to√°n ƒë∆°n h√†ng</h2>\r\n\r\n            <div class=\"checkout-content\" style=\"display: grid; grid-template-columns: 2fr 1fr; gap: 20px;\">\r\n                <!-- Form th√¥ng tin ng∆∞·ªùi nh·∫≠n -->\r\n                <div class=\"shipping-info card p-4 border rounded shadow-sm bg-white\">\r\n                    <h3 class=\"text-lg font-semibold mb-3\">Th√¥ng tin giao h√†ng</h3>\r\n                    <form id=\"frm\" class=\"flex flex-col gap-3\">\r\n\r\n                        <div>\r\n                            <label>H·ªç v√† t√™n</label>\r\n                            <input name=\"fullname\" class=\"form-control\" placeholder=\"Nh·∫≠p h·ªç t√™n ƒë·∫ßy ƒë·ªß\" required />\r\n                        </div>\r\n\r\n                        <div>\r\n                            <label>ƒê·ªãa ch·ªâ giao h√†ng</label>\r\n                            <input name=\"address\" class=\"form-control\" placeholder=\"Nh·∫≠p ƒë·ªãa ch·ªâ c·ª• th·ªÉ\" required />\r\n                        </div>\r\n\r\n                        <div>\r\n                            <label>S·ªë ƒëi·ªán tho·∫°i</label>\r\n                            <input name=\"phone\" class=\"form-control\" placeholder=\"Nh·∫≠p s·ªë ƒëi·ªán tho·∫°i\" required />\r\n                        </div>\r\n\r\n                        <div>\r\n                            <label>Ghi ch√∫ (tu·ª≥ ch·ªçn)</label>\r\n                            <textarea name=\"note\" class=\"form-control\" rows=\"2\" placeholder=\"V√≠ d·ª•: Giao trong gi·ªù h√†nh ch√≠nh...\"></textarea>\r\n                        </div>\r\n\r\n                        <div>\r\n                            <label>Ph∆∞∆°ng th·ª©c thanh to√°n</label>\r\n                            <div class=\"payment-options mt-2\">\r\n                                <label class=\"payment-option\">\r\n                                    <input type=\"radio\" name=\"payment_method\" value=\"COD\" checked />\r\n                                    <span>üíµ Thanh to√°n khi nh·∫≠n h√†ng (COD)</span>\r\n                                </label>\r\n                                <label class=\"payment-option\">\r\n                                    <input type=\"radio\" name=\"payment_method\" value=\"BANK\" />\r\n                                    <span>üè¶ Chuy·ªÉn kho·∫£n ng√¢n h√†ng</span>\r\n                                </label>\r\n                                <label class=\"payment-option\">\r\n                                    <input type=\"radio\" name=\"payment_method\" value=\"E_WALLET\" />\r\n                                    <span>üì± V√≠ ƒëi·ªán t·ª≠ (Momo, ZaloPay...)</span>\r\n                                </label>\r\n                                <label class=\"payment-option\">\r\n                                    <input type=\"radio\" name=\"payment_method\" value=\"CARD\" />\r\n                                    <span>üí≥ Th·∫ª t√≠n d·ª•ng / ghi n·ª£</span>\r\n                                </label>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <button class=\"btn btn-primary mt-4 w-full\" type=\"submit\">X√°c nh·∫≠n ƒë·∫∑t h√†ng</button>\r\n                    </form>\r\n\r\n                    <div id=\"msg\" class=\"mt-3 text-center\"></div>\r\n                </div>\r\n\r\n                <!-- T√≥m t·∫Øt ƒë∆°n h√†ng -->\r\n                <div class=\"order-summary card p-4 border rounded shadow-sm bg-white\">\r\n                    <h3 class=\"text-lg font-semibold mb-3\">T√≥m t·∫Øt ƒë∆°n h√†ng</h3>\r\n                    <div class=\"order-items mb-3\">\r\n                        ${items.map(it => `\r\n                            <div class=\"flex justify-between mb-2 border-b pb-1\">\r\n                                <div>\r\n                                    <div class=\"font-medium\">${it.name}</div>\r\n                                    <div class=\"text-sm text-gray-600\">S·ªë l∆∞·ª£ng: ${it.qty}</div>\r\n                                </div>\r\n                                <div class=\"text-right font-semibold\">${(it.price * it.qty).toLocaleString()} ƒë</div>\r\n                            </div>\r\n                        `).join('')}\r\n                    </div>\r\n\r\n                    <hr class=\"my-2\">\r\n                    <div class=\"flex justify-between text-lg font-bold\">\r\n                        <span>T·ªïng c·ªông:</span>\r\n                        <span>${total.toLocaleString()} ƒë</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        `;\r\n\r\n        // X·ª≠ l√Ω submit form\r\n        const form = root.querySelector('#frm');\r\n        const msg = root.querySelector('#msg');\r\n\r\n        form.addEventListener('submit', async (e) => {\r\n            e.preventDefault();\r\n            const data = Object.fromEntries(new FormData(form).entries());\r\n\r\n            try {\r\n                await window.Api.OrderAPI.create({\r\n                    items,\r\n                    shipping: data,\r\n                    payment_method: data.payment_method\r\n                });\r\n\r\n                window.Cart.clear();\r\n                msg.innerHTML = `<div class=\"text-green-600 font-semibold\">‚úÖ ƒê·∫∑t h√†ng th√†nh c√¥ng! C·∫£m ∆°n b·∫°n ƒë√£ mua s·∫Øm.</div>`;\r\n                setTimeout(() => (location.hash = '#/profile'), 1500);\r\n            } catch (err) {\r\n                msg.innerHTML = `<div class=\"text-red-600\">‚ùå L·ªói ƒë·∫∑t h√†ng: ${err.message}</div>`;\r\n            }\r\n        });\r\n    }\r\n\r\n    // G·∫Øn v√†o h·ªá th·ªëng SPA\r\n    window.Pages = window.Pages || {};\r\n    window.Pages.CheckoutPage = { mount };\r\n})();"],"mappings":"AAAA;AACA,CAAC,YAAW;EACJ,SAASA,KAAKA,CAACC,IAAI,EAAE;IACjB,MAAMC,KAAK,GAAGC,MAAM,CAACC,IAAI,CAACC,GAAG,CAAC,CAAC;IAC/B,IAAI,CAACH,KAAK,CAACI,MAAM,EAAE;MACfL,IAAI,CAACM,SAAS,GAAG;AACjC;AACA;AACA;AACA;AACA,aAAa;MACG;IACJ;IAEA,MAAMC,KAAK,GAAGN,KAAK,CAACO,MAAM,CAAC,CAACC,GAAG,EAAEC,EAAE,KAAKD,GAAG,GAAG,CAACC,EAAE,CAACC,KAAK,IAAI,CAAC,KAAKD,EAAE,CAACE,GAAG,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC;;IAEjF;IACAZ,IAAI,CAACM,SAAS,GAAG;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0BL,KAAK,CAACY,GAAG,CAACH,EAAE,IAAI;AAC1C;AACA;AACA,+DAA+DA,EAAE,CAACI,IAAI;AACtE,mFAAmFJ,EAAE,CAACE,GAAG;AACzF;AACA,wEAAwE,CAACF,EAAE,CAACC,KAAK,GAAGD,EAAE,CAACE,GAAG,EAAEG,cAAc,CAAC,CAAC;AAC5G;AACA,yBAAyB,CAAC,CAACC,IAAI,CAAC,EAAE,CAAC;AACnC;AACA;AACA;AACA;AACA;AACA,gCAAgCT,KAAK,CAACQ,cAAc,CAAC,CAAC;AACtD;AACA;AACA;AACA;AACA,SAAS;;IAED;IACA,MAAME,IAAI,GAAGjB,IAAI,CAACkB,aAAa,CAAC,MAAM,CAAC;IACvC,MAAMC,GAAG,GAAGnB,IAAI,CAACkB,aAAa,CAAC,MAAM,CAAC;IAEtCD,IAAI,CAACG,gBAAgB,CAAC,QAAQ,EAAE,MAAOC,CAAC,IAAK;MACzCA,CAAC,CAACC,cAAc,CAAC,CAAC;MAClB,MAAMC,IAAI,GAAGC,MAAM,CAACC,WAAW,CAAC,IAAIC,QAAQ,CAACT,IAAI,CAAC,CAACU,OAAO,CAAC,CAAC,CAAC;MAE7D,IAAI;QACA,MAAMzB,MAAM,CAAC0B,GAAG,CAACC,QAAQ,CAACC,MAAM,CAAC;UAC7B7B,KAAK;UACL8B,QAAQ,EAAER,IAAI;UACdS,cAAc,EAAET,IAAI,CAACS;QACzB,CAAC,CAAC;QAEF9B,MAAM,CAACC,IAAI,CAAC8B,KAAK,CAAC,CAAC;QACnBd,GAAG,CAACb,SAAS,GAAG,+FAA+F;QAC/G4B,UAAU,CAAC,MAAOC,QAAQ,CAACC,IAAI,GAAG,WAAY,EAAE,IAAI,CAAC;MACzD,CAAC,CAAC,OAAOC,GAAG,EAAE;QACVlB,GAAG,CAACb,SAAS,GAAG,6CAA6C+B,GAAG,CAACC,OAAO,QAAQ;MACpF;IACJ,CAAC,CAAC;EACN;;EAEA;EACApC,MAAM,CAACqC,KAAK,GAAGrC,MAAM,CAACqC,KAAK,IAAI,CAAC,CAAC;EACjCrC,MAAM,CAACqC,KAAK,CAACC,YAAY,GAAG;IAAEzC;EAAM,CAAC;AACzC,CAAC,EAAE,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}