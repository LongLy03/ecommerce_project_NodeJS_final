{"ast":null,"code":"// src/services/api.js\nconst API_BASE = typeof window !== 'undefined' && window.__API_BASE__ || 'http://localhost:5000';\nasync function request(path, {\n  method = 'GET',\n  data,\n  headers = {},\n  auth = false\n} = {}) {\n  const opts = {\n    method,\n    headers: {\n      'Content-Type': 'application/json',\n      ...headers\n    },\n    credentials: 'include'\n  };\n  if (data) opts.body = JSON.stringify(data);\n  const res = await fetch(`${API_BASE}${path}`, opts);\n  const json = await res.json().catch(() => ({}));\n  if (!res.ok) {\n    const msg = json.message || `HTTP ${res.status}`;\n    throw new Error(msg);\n  }\n  return json;\n}\n\n// Products\nexport const ProductAPI = {\n  list: q => request(`/api/products${q ? `?q=${encodeURIComponent(q)}` : ''}`),\n  get: id => request(`/api/products/${id}`)\n};\n\n// Auth\nexport const AuthAPI = {\n  register: payload => request('/api/users/register', {\n    method: 'POST',\n    data: payload\n  }),\n  login: payload => request('/api/users/login', {\n    method: 'POST',\n    data: payload\n  }),\n  me: () => request('/api/users/profile', {\n    auth: true\n  }),\n  logout: () => request('/api/users/logout', {\n    method: 'POST'\n  })\n};\n\n// Orders\nexport const OrderAPI = {\n  create: payload => request('/api/orders', {\n    method: 'POST',\n    data: payload\n  }),\n  myOrders: () => request('/api/orders/my', {\n    method: 'GET'\n  })\n};","map":{"version":3,"names":["API_BASE","window","__API_BASE__","request","path","method","data","headers","auth","opts","credentials","body","JSON","stringify","res","fetch","json","catch","ok","msg","message","status","Error","ProductAPI","list","q","encodeURIComponent","get","id","AuthAPI","register","payload","login","me","logout","OrderAPI","create","myOrders"],"sources":["D:/52200147/HKVII/NodeJS/CK/ecommerce_project_NodeJS_final/frontend/src/services/api.js"],"sourcesContent":["// src/services/api.js\r\nconst API_BASE = (typeof window !== 'undefined' && window.__API_BASE__) || 'http://localhost:5000';\r\n\r\nasync function request(path, { method = 'GET', data, headers = {}, auth = false } = {}) {\r\n    const opts = { method, headers: { 'Content-Type': 'application/json', ...headers }, credentials: 'include' };\r\n    if (data) opts.body = JSON.stringify(data);\r\n\r\n    const res = await fetch(`${API_BASE}${path}`, opts);\r\n    const json = await res.json().catch(() => ({}));\r\n    if (!res.ok) {\r\n        const msg = json.message || `HTTP ${res.status}`;\r\n        throw new Error(msg);\r\n    }\r\n    return json;\r\n}\r\n\r\n// Products\r\nexport const ProductAPI = {\r\n        list: (q) => request(`/api/products${q ? `?q=${encodeURIComponent(q)}` : ''}`),\r\n  get: (id) => request(`/api/products/${id}`)\r\n};\r\n\r\n// Auth\r\nexport const AuthAPI = {\r\n  register: (payload) => request('/api/users/register', { method: 'POST', data: payload }),\r\n  login: (payload) => request('/api/users/login', { method: 'POST', data: payload }),\r\n  me: () => request('/api/users/profile', { auth: true }),\r\n  logout: () => request('/api/users/logout', { method: 'POST' }),\r\n};\r\n\r\n// Orders\r\nexport const OrderAPI = {\r\n  create: (payload) => request('/api/orders', { method: 'POST', data: payload }),\r\n  myOrders: () => request('/api/orders/my', { method: 'GET' })\r\n};"],"mappings":"AAAA;AACA,MAAMA,QAAQ,GAAI,OAAOC,MAAM,KAAK,WAAW,IAAIA,MAAM,CAACC,YAAY,IAAK,uBAAuB;AAElG,eAAeC,OAAOA,CAACC,IAAI,EAAE;EAAEC,MAAM,GAAG,KAAK;EAAEC,IAAI;EAAEC,OAAO,GAAG,CAAC,CAAC;EAAEC,IAAI,GAAG;AAAM,CAAC,GAAG,CAAC,CAAC,EAAE;EACpF,MAAMC,IAAI,GAAG;IAAEJ,MAAM;IAAEE,OAAO,EAAE;MAAE,cAAc,EAAE,kBAAkB;MAAE,GAAGA;IAAQ,CAAC;IAAEG,WAAW,EAAE;EAAU,CAAC;EAC5G,IAAIJ,IAAI,EAAEG,IAAI,CAACE,IAAI,GAAGC,IAAI,CAACC,SAAS,CAACP,IAAI,CAAC;EAE1C,MAAMQ,GAAG,GAAG,MAAMC,KAAK,CAAC,GAAGf,QAAQ,GAAGI,IAAI,EAAE,EAAEK,IAAI,CAAC;EACnD,MAAMO,IAAI,GAAG,MAAMF,GAAG,CAACE,IAAI,CAAC,CAAC,CAACC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;EAC/C,IAAI,CAACH,GAAG,CAACI,EAAE,EAAE;IACT,MAAMC,GAAG,GAAGH,IAAI,CAACI,OAAO,IAAI,QAAQN,GAAG,CAACO,MAAM,EAAE;IAChD,MAAM,IAAIC,KAAK,CAACH,GAAG,CAAC;EACxB;EACA,OAAOH,IAAI;AACf;;AAEA;AACA,OAAO,MAAMO,UAAU,GAAG;EAClBC,IAAI,EAAGC,CAAC,IAAKtB,OAAO,CAAC,gBAAgBsB,CAAC,GAAG,MAAMC,kBAAkB,CAACD,CAAC,CAAC,EAAE,GAAG,EAAE,EAAE,CAAC;EACpFE,GAAG,EAAGC,EAAE,IAAKzB,OAAO,CAAC,iBAAiByB,EAAE,EAAE;AAC5C,CAAC;;AAED;AACA,OAAO,MAAMC,OAAO,GAAG;EACrBC,QAAQ,EAAGC,OAAO,IAAK5B,OAAO,CAAC,qBAAqB,EAAE;IAAEE,MAAM,EAAE,MAAM;IAAEC,IAAI,EAAEyB;EAAQ,CAAC,CAAC;EACxFC,KAAK,EAAGD,OAAO,IAAK5B,OAAO,CAAC,kBAAkB,EAAE;IAAEE,MAAM,EAAE,MAAM;IAAEC,IAAI,EAAEyB;EAAQ,CAAC,CAAC;EAClFE,EAAE,EAAEA,CAAA,KAAM9B,OAAO,CAAC,oBAAoB,EAAE;IAAEK,IAAI,EAAE;EAAK,CAAC,CAAC;EACvD0B,MAAM,EAAEA,CAAA,KAAM/B,OAAO,CAAC,mBAAmB,EAAE;IAAEE,MAAM,EAAE;EAAO,CAAC;AAC/D,CAAC;;AAED;AACA,OAAO,MAAM8B,QAAQ,GAAG;EACtBC,MAAM,EAAGL,OAAO,IAAK5B,OAAO,CAAC,aAAa,EAAE;IAAEE,MAAM,EAAE,MAAM;IAAEC,IAAI,EAAEyB;EAAQ,CAAC,CAAC;EAC9EM,QAAQ,EAAEA,CAAA,KAAMlC,OAAO,CAAC,gBAAgB,EAAE;IAAEE,MAAM,EAAE;EAAM,CAAC;AAC7D,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}